"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[582],{32428:function(e,t,l){l.d(t,{$S:function(){return MySelect},AT:function(){return MySelectGroupby}});var n=l(57437),i=l(29818),a=l(39227),r=l(2265),s=l(70266);function MySelectGroupby(e){let{options:t,handleSelect:l,label:o}=e,c=(0,i.a0)().EDA.DD.groupby,[d,u]=(0,r.useState)(c);return(0,n.jsxs)(a.Z,{children:[(0,n.jsx)("label",{id:"aria-label",htmlFor:"aria-example-input",children:o}),(0,n.jsx)(s.ZP,{"aria-labelledby":"aria-label",inputId:"aria-example-input",className:"basic-single",classNamePrefix:"select",placeholder:"",isSearchable:!0,isClearable:!1,options:t,value:d,onChange:e=>{u({label:e.value,value:e.value}),setTimeout(()=>l(e),100)}})]})}function MySelect(e){let{options:t,value:l,onChange:i,label:r}=e;return(0,n.jsxs)(a.Z,{children:[(0,n.jsx)("label",{id:"aria-label",htmlFor:"aria-example-input",children:r}),(0,n.jsx)(s.ZP,{"aria-labelledby":"aria-label",inputId:"aria-example-input",className:"basic-single",classNamePrefix:"select",placeholder:"",isSearchable:!0,isClearable:!1,options:t,value:l,onChange:i})]})}},36661:function(e,t,l){l.d(t,{Z:function(){return OmicSelector}});var n=l(57437),i=l(96350),a=l(81797),r=l(39227),s=l(2265);function OmicSelector(e){let{selOmic:t,setSelOmic:l,omicViewRef:s}=e,{omics:o}=(0,a.tc)(),{OMIC2NAME:c}=(0,i.S)();return(0,n.jsx)(r.Z,{sx:{display:"flex",justifyContent:"center",mt:1},children:o.map((e,i)=>(0,n.jsx)(OmicButton,{selOmic:t,id:e,title:c[e],setSelOmic:l,omicViewRef:s},e))})}let OmicButton=e=>{let{selOmic:t,id:l,title:i,setSelOmic:o,omicViewRef:c}=e,{omics:d}=(0,a.tc)(),[u,h]=(0,s.useState)(!1),p=l==t,m="#00000015",x="#000000aa";return p?(m="#1976D2ff",x="#ffffff"):u&&(m="#00000033",x="#000000aa"),(0,n.jsx)(r.Z,{sx:{px:3,py:1,mx:.1,fontSize:"1.1em",color:x,backgroundColor:m,userSelect:"none",cursor:"pointer",transition:"ease 1s"},onMouseEnter:()=>h(!0),onMouseLeave:()=>h(!1),onClick:()=>{let e=d.indexOf(l)-d.indexOf(t);setTimeout(()=>{c.current.scrollLeft=c.current.scrollLeft+e*c.current.clientWidth},100),o(l)},children:i})}},45134:function(e,t,l){function getHistogramValues(e,t){let l=Math.min(...e),n=(Math.max(...e)-l)/t,i=Array(t).fill(0);e.forEach(e=>{let a=Math.floor((e-l)/n);a>=0&&a<t&&i[a]++});let a=i.map(t=>t/(e.length*n)),r=Array(t).fill(0).map((e,t)=>l+(t+.5)*n),s=[];for(let e=0;e<t;e++)s.push({binCenter:r[e],density:a[e]});return s}function calculateQuantile(e,t){let l=e.slice().sort((e,t)=>e-t),n=Math.floor(l.length*t),i=l[n];return i}function calculateXTicks(e,t,l){let n=(t-e)/(l-1),i=[];for(let t=0;t<l;t++){let l=e+t*n;i.push(l)}return i.filter(e=>e<0).length>0&&i.filter(e=>e>0).length>0&&i.push(0),i.sort((e,t)=>e-t),i=i.map(e=>e<=0?Math.floor(100*e)/100:e>0?Math.ceil(100*e)/100:void 0)}l.d(t,{jI:function(){return calculateXTicks},vi:function(){return calculateQuantile},wH:function(){return getHistogramValues}})},58582:function(e,t,l){l.r(t),l.d(t,{default:function(){return Results}});var n=l(57437),i=l(2265),a=l(63916),r=l(55303),s=l(85269),o=l(39227),c=l(81797),d=l(38939),u=l(32428),h=l(29818),p=l(96350),m=l(49600),x=l(46776),f=l(47042),b=l(22079),g=l(91797),w=l(52151),j=l(78063),y=l(91928),v=l(52481),C=l(33533),A=l(43795),S=l(53146),Z=l(45134),N=l(90045),E=l(16573),D=l(24235),k=l(50039),T=l(86812),M=l(51125),P=l(68448);function MyHistogram(e){let{dataHist:t,gValues:l,xrange:i,yrange:a,xTicks:r,figRef:s,omic:o}=e;return(0,n.jsxs)(N.T,{ref:e=>{s.current[o].Hist=e},style:{margin:"auto"},width:500,height:210,data:t,margin:{top:10,right:30,left:0,bottom:0},children:[(0,n.jsx)(E.q,{strokeDasharray:"3 3"}),(0,n.jsx)(D.K,{dataKey:"binCenter",type:"number",ticks:r,domain:i,style:{fontFamily:"Calibri"}}),(0,n.jsx)(k.B,{domain:a,style:{fontFamily:"Calibri"}}),(0,n.jsx)(T.u,{}),l.map((e,t)=>(0,n.jsx)(M.u,{connectNulls:!0,type:"monotone",dataKey:e,fillOpacity:.3,stroke:P.s[t%P.s.length],fill:P.s[t%P.s.length]},e))]})}var z=l(28811),F=l.n(z);let O=F()(()=>Promise.all([l.e(934),l.e(439)]).then(l.bind(l,87022)),{loadableGenerated:{webpack:()=>[87022]},ssr:!1});function MyBoxPlotPlotly(e){let{data:t,xrange:l,xTicks:i,figRef:a,omic:r}=e;return(0,n.jsx)(o.Z,{ref:e=>{a.current[r].Box=e},children:(0,n.jsx)(O,{style:{position:"relative",left:-20},data:t,layout:{width:570,height:280,showlegend:!0,legend:{orientation:"h"},xaxis:{zeroline:!1,range:l,tickvals:i},yaxis:{type:"category",showticklabels:!1},margin:{t:0}},config:{staticPlot:!0,displayModeBar:!1},onChange:e=>console.log(e)})})}var I=l(21245),B=l(95841);function PlotData(e){let{omic:t,fileType:l,filteredID:a,groupby:r,showNorm:s,figRef:d}=e,u=(0,c.tc)().user.mdata,h=(0,c.tc)().norm[l],p=(0,i.useMemo)(()=>{let e=Math.floor(Math.max(1,a.length/1e4)),t=[];for(let l=0;l<a.length;l+=e)t.push(a[l]);let l=[],n=(0,I.$i)(h.T);for(let e=0;e<t.length;e++)l.push(n[t[e]]);let i=new dfd.DataFrame(l);return i.setIndex({index:t,inplace:!0}),(0,I.$i)(i.T)},[h,a]),{myData:m,gValues:x,idx2g:f}=(0,i.useMemo)(()=>{let e={};for(let t=0;t<u.shape[0];t++)u.columns.includes(r)?null!=u.column(r).values[t]&&(e[u.index[t]]=u.column(r).values[t]):e[u.index[t]]="All values";let t=Object.keys(e).map(t=>e[t]).filter((e,t,l)=>l.indexOf(e)===t),l={};return t.map(e=>l[e]=[]),Object.keys(p).map(t=>{Object.keys(e).includes(t)&&Object.keys(p[t]).map(n=>l[e[t]].push(p[t][n]))}),{myData:l,gValues:t,idx2g:e}},[r,u,p]),{xrange:b,xTicks:g,minimum:w,maximum:j}=(0,i.useMemo)(e=>{let t=Object.keys(m).map(e=>m[e]).flat(),l=(0,Z.vi)(t,1e-4),n=(0,Z.vi)(t,.9999),i=[l-Math.abs(.05*l),n+Math.abs(.05*n)],a=(0,Z.jI)(l,n,6);return{xrange:i,xTicks:a,minimum:l,maximum:n}},[m]),{dataHist:y,yrange:v}=(0,i.useMemo)(()=>{let e={};Object.keys(m).map(t=>{e[t]=m[t].filter(e=>w<=e&&e<=j);let l=Math.max(1,Math.floor(e[t].length/5e4)),n=[];for(let i=0;i<e[t].length;i+=l)n.push(e[t][i]);n.push(e[t].slice(-1)),e[t]=n}),Object.keys(e).map(t=>{try{e[t].length>0?e[t]=(0,Z.wH)(e[t],1+Math.ceil(Math.log2(e[t].length))):delete e[t]}catch(e){console.error(e)}}),(e=(e=Object.keys(e).map(t=>e[t].map(e=>{let{binCenter:l,density:n}=e;return{binCenter:Math.round(100*l)/100,[t]:Number.parseFloat(n).toExponential(3),d:n}}))).flat()).sort((e,t)=>e.binCenter-t.binCenter);let t=0,l=e.map(e=>e.d);for(let e=0;e<l.length;e++)t=l[e]>t?l[e]:t;let n=[0,Number.parseFloat((1.05*t).toPrecision(2))];return{dataHist:e,yrange:n}},[m,w,j]),C=(0,i.useMemo)(()=>Object.keys(m).map((e,t)=>m[e].length>0?{x:m[e],type:"box",name:"".concat(e),marker:{color:P.s[t%P.s.length]}}:null).filter(e=>null!=e),[m]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.Z,{sx:{height:210},children:(0,n.jsx)(MyHistogram,{dataHist:y,gValues:x,xrange:b,xTicks:g,yrange:v,figRef:d,omic:t})}),(0,n.jsx)(o.Z,{sx:{height:280,width:500,margin:"auto",overflowX:"hidden",overflowY:"hidden"},children:(0,n.jsx)(B.Z,{children:(0,n.jsx)(MyBoxPlotPlotly,{data:C,xrange:b,xTicks:g,figRef:d,omic:t})})})]})}var R=l(67248),V=l(33457);function FilterTable(e){let{columns:t,data:l}=e,a=(0,i.useRef)(null),[r,s]=(0,i.useState)(!0),[o,c]=(0,i.useState)([]);(0,i.useEffect)(()=>{s(!1)},[]),(0,i.useEffect)(()=>{try{var e,t;null===(t=a.current)||void 0===t||null===(e=t.scrollToIndex)||void 0===e||e.call(t,0)}catch(e){console.error(e)}},[o]);let d=(0,V.X0)({columns:t,data:l,defaultDisplayColumn:{enableResizing:!0},layoutMode:"grid",enableBottomToolbar:!1,enableTopToolbar:!1,enableColumnResizing:!1,enableColumnVirtualization:!0,enableGlobalFilterModes:!1,enablePagination:!1,enableColumnPinning:!1,enableRowNumbers:!1,enableRowVirtualization:!0,enableColumnFilters:!1,muiTableContainerProps:{sx:{maxHeight:"450px"}},onSortingChange:c,state:{isLoading:r,sorting:o},rowVirtualizerInstanceRef:a,rowVirtualizerOptions:{overscan:5},columnVirtualizerOptions:{overscan:2}});return(0,n.jsx)(B.Z,{children:(0,n.jsx)("div",{style:{opacity:.9,width:"100%",margin:"auto"},children:(0,n.jsx)(V.P2,{table:d})})})}var G=l(56603),q=l(35843),H=l(666);let L=(0,q.ZP)(b.Z)(e=>{let{theme:t}=e;return{"& .MuiDialogContent-root":{padding:t.spacing(2)},"& .MuiDialogActions-root":{padding:t.spacing(1)}}});function HelpSectionFilter(){let[e,t]=i.useState(!1),handleClose=()=>{t(!1)};return(0,n.jsxs)(o.Z,{children:[(0,n.jsx)(x.Z,{"aria-label":"question",size:"large",onClick:()=>{t(!0)},children:(0,n.jsx)(H.Z,{fontSize:"inherit"})}),(0,n.jsxs)(L,{onClose:handleClose,"aria-labelledby":"customized-dialog-title",open:e,maxWidth:"md",children:[(0,n.jsx)(g.Z,{sx:{m:0,p:2},id:"customized-dialog-title",children:"Data Distribution"}),(0,n.jsx)(x.Z,{"aria-label":"close",onClick:handleClose,sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]},children:(0,n.jsx)(C.default,{})}),(0,n.jsx)(w.Z,{sx:{textAlign:"justify"},dividers:!0,children:(0,n.jsxs)(s.Z,{gutterBottom:!0,children:["The ",(0,n.jsx)("strong",{children:"Biomolecule Table"})," lists the identifiers of biomolecules used in the visualization on the left. It helps users track which biomolecules are currently being analyzed. users to Users can ",(0,n.jsx)("strong",{children:"filter the biomolecules"})," based on a specific column from the Omic Metadata Table. After selecting a filter, only the biomolecules that match the string criteria (regex are accepted) will be displayed in the density plot."]})}),(0,n.jsx)(y.Z,{})]})]})}function FilterFeatures(e){let{omic:t,setFilteredID:l,updatePlot:a}=e,r=(0,h.a0)().EDA.DD.filterText["".concat(t,"2i")],[s,c]=(0,i.useState)(r),d=(0,h.a0)().EDA.DD.filterCol["".concat(t,"2i")],[p,m]=(0,i.useState)(d),[x]=(0,G.Z)(t),{filteredFeatures:f,columns:b}=(0,i.useMemo)(()=>{let e=[],t=[{accessorKey:" ",header:" ",size:60}];if(x.columns.includes(p)){e=(e=x.column(p)).values.map((t,l)=>({" ":e.index[l],[p]:t}));let l=RegExp("");try{l=new RegExp(s)}catch(e){l=RegExp("")}e=e.filter(e=>null!=e[p]&&l.test(e[p])),t.push({accessorKey:p,header:p})}else e=(e=x.index).map((e,t)=>({" ":e}));return{filteredFeatures:e,columns:t}},[s,p,x]);return(0,i.useEffect)(()=>{let e=setTimeout(()=>{l(f.map(e=>e[" "])),a([t])},1e3);return()=>clearTimeout(e)},[f,l,a,t]),(0,n.jsxs)(o.Z,{sx:{width:"95%",margin:"auto"},children:[(0,n.jsxs)(o.Z,{sx:{display:"flex",height:80},children:[(0,n.jsx)(o.Z,{sx:{mt:3},children:(0,n.jsx)(HelpSectionFilter,{})}),(0,n.jsx)(o.Z,{sx:{width:"40%",pt:1},children:(0,n.jsx)(u.$S,{options:[{label:"All features",value:"All features"},...x.columns.map(e=>({label:e,value:e}))],onChange:e=>m(e.value),value:{label:p,value:p}})}),x.columns.includes(p)&&(0,n.jsx)(B.Z,{children:(0,n.jsx)(o.Z,{sx:{mt:3,ml:3},children:(0,n.jsx)(R.Z,{id:"standard-name",placeholder:"Filter text",value:s,onChange:e=>c(e.target.value)})})})]}),(0,n.jsx)(o.Z,{sx:{mt:2},children:(0,n.jsx)(FilterTable,{data:f,columns:b})})]})}let VSNPlot=e=>{let{openVSNPlot:t,setOpenVSNPlot:l,omic:a}=e,{API_URL:r}=(0,p.S)(),d=(0,c.tc)(),{jobID:u}=(0,c.tc)(),[h,f]=(0,i.useState)(null);return(0,i.useEffect)(()=>{let fetchVSNImage=async()=>{let e=await fetch("".concat(r,"/get_vsn_plot/").concat(u,"/").concat(a)),t=await e.blob(),l=URL.createObjectURL(t);f(l)},e=setTimeout(fetchVSNImage,500);return()=>clearTimeout(e)},[f,r,u,a]),(0,n.jsxs)(b.Z,{open:t,onClose:()=>l(!1),fullWidth:!0,maxWidth:"md",children:[(0,n.jsx)(g.Z,{children:"VSN-Quality Plot"}),(0,n.jsx)(x.Z,{"aria-label":"close",onClick:()=>l(!1),sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]},children:(0,n.jsx)(C.default,{})}),(0,n.jsxs)(w.Z,{dividers:!0,children:[(0,n.jsx)(s.Z,{sx:{textAlign:"justify"},gutterBottom:!0,children:"The red dots, connected by lines, show the running median of the standard deviation. The aim of these plots is to see whether there is a systematic trend in the standard deviation of the data as a function of overall expression. After variance stabilisation, this should be approximately a horizontal line. It may have some random fluctuations, but should not show an overall trend. If this is not the case, that usually indicates a data quality problem, or is a consequence of inadequate prior data preprocessing."}),(0,n.jsx)(o.Z,{sx:{textAlign:"center",py:2},children:(0,n.jsx)("img",{src:h,alt:"VSN-Quality Plot"})}),(0,n.jsxs)(s.Z,{sx:{textAlign:"justify"},gutterBottom:!0,children:["Please, find more information about VSN on ",(0,n.jsx)(j.Z,{target:"_blank",href:"https://www.bioconductor.org/packages/release/bioc/vignettes/vsn/inst/doc/A-vsn.html",children:"VSN vignette"}),"."]})]}),(0,n.jsx)(y.Z,{children:(0,n.jsx)(m.Z,{autoFocus:!0,onClick:()=>{var e=document.createElement("a");e.setAttribute("download","".concat(d.userFileNames["x".concat(a)].replace(/\.[^.]+$/,"")+"VSN_QualityPlot.png")),e.style.display="none",e.href=h,document.body.appendChild(e),e.click(),e.remove()},children:"Download Plot"})})]})};var DataDistribution_OmicView=function(e){let{omic:t,figRef:l,showPlot:a,showNorm:r,updatePlot:d,groupby:u}=e,[h,b]=(0,i.useState)(),{OMIC2NAME:g}=(0,p.S)(),w=(0,c.tc)(),downloadXnorm=()=>{let e=(0,I.$i)(w.norm["x".concat(t)].T),l=Object.keys(e),n=w.index["x".concat(t)],i=[["",...n].join("	"),...l.map(t=>[t,...n.map(l=>e[t][l])].join("	"))].join("\n"),a=new Blob([i],{type:"text/plain"});var r=document.createElement("a");r.setAttribute("download","Norm_".concat(w.userFileNames["x".concat(t)])),r.style.display="none",r.href=window.URL.createObjectURL(a),document.body.appendChild(r),r.click(),r.remove()},[j,y]=(0,i.useState)(!1);return(0,n.jsxs)(o.Z,{children:[(0,n.jsxs)(o.Z,{sx:{border:"0px solid red",height:0,width:"50%",display:"flex",justifyContent:"center",position:"relative",top:-10,py:1},children:[(0,n.jsx)(o.Z,{sx:{px:2},children:(0,n.jsx)(m.Z,{sx:{fontSize:16,textTransform:"none",color:"rgba(0,0,0,0.6)"},startIcon:(0,n.jsx)(v.Z,{}),color:"info",onClick:()=>downloadXnorm(),children:"Download Normalized Data"})}),"vsn"==w.results.PRE.norm["x".concat(t)]&&(0,n.jsxs)(o.Z,{sx:{px:2},children:[(0,n.jsx)(m.Z,{sx:{fontSize:16,textTransform:"none",color:"rgba(0,0,0,0.6)"},startIcon:(0,n.jsx)(A.Z,{}),color:"info",onClick:()=>y(!0),children:"VSN-Quality Plot"}),(0,n.jsx)(VSNPlot,{openVSNPlot:j,setOpenVSNPlot:y,omic:t})]})]}),(0,n.jsxs)(o.Z,{sx:{display:"flex",justifyContent:"space-evenly",alignItems:"flex-start"},children:[(0,n.jsxs)(o.Z,{sx:{width:"45%",height:"600px",pt:4},children:[(0,n.jsxs)(s.Z,{variant:"h6",sx:{textAlign:"center",color:"#555555"},children:["Data Distribution",(0,n.jsx)(x.Z,{"aria-label":"download",size:"small",onClick:e=>(0,S.kr)(l.current[t].Hist,l.current[t].Box,g[t]),sx:{opacity:.5,visibility:a[t]?"visible":"hidden",paddingBottom:1},children:(0,n.jsx)(v.Z,{})})]}),a[t]?(0,n.jsx)(o.Z,{sx:{height:500,overflow:"hidden",mt:3},children:(0,n.jsx)(PlotData,{omic:t,fileType:"x".concat(t),filteredID:h,groupby:u,showNorm:r,figRef:l})}):(0,n.jsx)(o.Z,{sx:{textAlign:"center",pt:20,height:550},children:(0,n.jsx)(f.Z,{size:100,thickness:2})})]}),(0,n.jsx)(o.Z,{sx:{width:"45%",height:"600px"},children:(0,n.jsx)(FilterFeatures,{omic:t,setFilteredID:b,updatePlot:d})})]})]})},_=l(36661);let U=(0,q.ZP)(b.Z)(e=>{let{theme:t}=e;return{"& .MuiDialogContent-root":{padding:t.spacing(2)},"& .MuiDialogActions-root":{padding:t.spacing(1)}}});function HelpSection(){let[e,t]=i.useState(!1),handleClose=()=>{t(!1)};return(0,n.jsxs)(o.Z,{children:[(0,n.jsx)(x.Z,{"aria-label":"question",size:"large",onClick:()=>{t(!0)},children:(0,n.jsx)(H.Z,{fontSize:"inherit"})}),(0,n.jsxs)(U,{onClose:handleClose,"aria-labelledby":"customized-dialog-title",open:e,maxWidth:"lg",children:[(0,n.jsx)(g.Z,{sx:{m:0,p:2},id:"customized-dialog-title",children:"Data Distribution"}),(0,n.jsx)(x.Z,{"aria-label":"close",onClick:handleClose,sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]},children:(0,n.jsx)(C.default,{})}),(0,n.jsxs)(w.Z,{sx:{textAlign:"justify"},dividers:!0,children:[(0,n.jsx)(s.Z,{gutterBottom:!0,children:"This section allows users to explore the distribution of quantitative values for biomolecules across different omic datasets (metabolomics, proteomics and transcriptomics). Users can navigate between different omics using the Omic Selector button at the top."}),(0,n.jsxs)(s.Z,{gutterBottom:!0,children:["The ",(0,n.jsx)("strong",{children:"Density Plot & Boxplot"})," figure displays the distribution of quantitative values for the selected biomolecules. The default view shows the overall distribution, but users can customize this view using the Group by selector."]}),(0,n.jsxs)(s.Z,{gutterBottom:!0,children:["The ",(0,n.jsx)("strong",{children:"Group by Selector"})," button lets users choose a categorical variable from the Experimental Metadata Table to group the data by. When a category is selected, the plot will display separate density curves for each group within that category. This feature is particularly useful for detecting batch effects or other group-specific variations in your data."]})]}),(0,n.jsx)(y.Z,{})]})]})}function DataDistribution(){let e=(0,i.useRef)(),{omics:t}=(0,c.tc)(),[l,a]=(0,i.useState)(t[0]),r=(0,i.useRef)(t.reduce((e,t)=>({...e,[t]:{}}),{})),s=(0,h.mX)(),p=(0,h.a0)().EDA.DD.showNorm,[m,x]=(0,i.useState)(p),f=(0,h.a0)().EDA.DD.groupby,[b,g]=(0,i.useState)(f),{mdataType:w}=(0,c.tc)(),j=(0,c.tc)().user.mdata.columns.map(e=>({label:e,value:e})).filter(e=>"categorical"==w[e.value].type);j=[{label:"All values",value:"All values"},...j];let[y,v]=(0,i.useState)(t.reduce((e,t)=>({...e,[t]:!1}),{})),C=(0,i.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e;e.map(e=>{v(t=>({...t,[e]:!1}))}),e.map(e=>setTimeout(()=>v(t=>({...t,[e]:!0})),300))},[]),A=(0,i.useCallback)(e=>{let l={label:e.value,value:e.value};g(l),s({type:"set-eda-dd-groupby",groupby:l}),C(t)},[C,t,s]);return(0,i.useCallback)(e=>{x(e.target.checked),C(t)},[C,t]),(0,n.jsxs)(o.Z,{children:[(0,n.jsx)(o.Z,{sx:{position:"absolute"},children:(0,n.jsx)(HelpSection,{})}),(0,n.jsx)(_.Z,{selOmic:l,setSelOmic:a,omicViewRef:e}),(0,n.jsxs)(d.ZP,{container:!0,direction:"row",justifyContent:"center",alignItems:"center",sx:{mb:3,mt:3},children:[!1,(0,n.jsx)(d.ZP,{item:!0,xs:3,children:(0,n.jsx)(u.AT,{options:j,handleSelect:A,label:"Group by"})})]}),(0,n.jsx)(o.Z,{ref:e,sx:{overflow:"hidden"},children:(0,n.jsx)(o.Z,{sx:{display:"flex",width:"".concat(t.length,"00%")},children:t.map(e=>(0,n.jsx)(o.Z,{sx:{width:"".concat(100/t.length,"%"),opacity:l==e?1:0,transition:"all 1s ease"},children:(0,n.jsx)(DataDistribution_OmicView,{omic:e,figRef:r,showPlot:y,showNorm:m,updatePlot:C,groupby:b.value})},e))})})]})}var X=l(15095);let W=F()(()=>l.e(738).then(l.bind(l,11738)),{loadableGenerated:{webpack:()=>[11738]}}),Q=F()(()=>Promise.all([l.e(125),l.e(543),l.e(635)]).then(l.bind(l,81635)),{loadableGenerated:{webpack:()=>[81635]}}),$=F()(()=>Promise.all([l.e(125),l.e(227),l.e(543),l.e(83),l.e(151),l.e(330)]).then(l.bind(l,81330)),{loadableGenerated:{webpack:()=>[81330]}}),K=F()(()=>Promise.all([l.e(813),l.e(261),l.e(227),l.e(543),l.e(374),l.e(794),l.e(310)]).then(l.bind(l,52310)),{loadableGenerated:{webpack:()=>[52310]}}),Y=F()(()=>Promise.resolve().then(l.bind(l,97564)),{loadableGenerated:{webpack:()=>[97564]}});function Results(){let e=(0,h.mX)(),{API_URL:t}=(0,p.S)(),s=(0,i.useRef)(),d=(0,h.a0)().status,[u,m]=(0,i.useState)(d),x=(0,h.a0)().value,[f,b]=(0,i.useState)(x),{jobID:g,omics:w,annParams:j,annStatus:y}=(0,c.tc)(),[v,C]=(0,i.useState)(null),A=(0,i.useCallback)(async()=>{let l=await fetch("".concat(t,"/get_status/").concat(g,"/").concat(w.join(""))),n=await l.json();Object.keys(u).some(e=>u[e].status!=n[e].status)&&(m(n),e({type:"set-status",status:n})),Object.keys(n).every(e=>"waiting"!=n[e].status)&&clearInterval(s.current)},[t,g,s,e,u,w]);return(0,i.useEffect)(()=>{if(Object.keys(d).some(e=>"waiting"==d[e].status))return s.current=setInterval(A,2500),()=>clearInterval(s.current)},[s,A,d]),(0,i.useEffect)(()=>{l.e(794).then(l.t.bind(l,91794,19)).then(t=>{e({type:"set-pwa-attr",attr:"MetaboID",value:t})})},[e]),(0,i.useEffect)(()=>{y&&(b(.1),e({type:"set-tab-value",value:.1}))},[j,y,e]),(0,n.jsxs)(o.Z,{sx:{display:"flex",flexGrow:1,bgcolor:"background.paper"},children:[(0,n.jsx)(o.Z,{sx:{width:"15%",borderRight:1,borderColor:"divider"},children:(0,n.jsxs)(a.Z,{orientation:"vertical",variant:"scrollable",value:f,onChange:(t,l)=>{b(l),e({type:"set-tab-value",value:l})},"aria-label":"Results Sections Tabs",sx:{width:"15%",position:"fixed"},children:[j&&(0,n.jsx)(r.Z,{label:(0,n.jsx)(TabComponent,{text:"PUTATIVE ANNOTATION",status:y}),value:.1,sx:{fontSize:12,mt:2,p:0}}),(0,n.jsx)(r.Z,{label:(0,n.jsx)(TabComponent,{text:"DATA DISTRIBUTION",status:""}),value:.2,sx:{fontSize:12,m:0,p:0}}),(0,n.jsx)(r.Z,{label:(0,n.jsx)(TabComponent,{text:"PCA",status:u.EDA_PCA.status}),value:.3,sx:{fontSize:12,m:0,p:0},disabled:"ok"!=u.EDA_PCA.status}),(0,n.jsx)(r.Z,{label:(0,n.jsx)(TabComponent,{text:"MULTIOMICS FACTOR ANALYSIS",status:u.MOFA.status}),value:1.1,sx:{fontSize:12,mt:0,p:0},disabled:"ok"!=u.MOFA.status}),(0,n.jsx)(r.Z,{label:(0,n.jsx)(TabComponent,{text:"ENRICHMENT ANALYSIS",status:""}),value:2.1,sx:{fontSize:12,m:0,p:0},disabled:!1}),(0,n.jsx)(r.Z,{label:(0,n.jsx)(TabComponent,{text:"PATHWAY INTEGRATIVE ANALYSIS",status:null==v?void 0:v.status}),value:3.1,sx:{fontSize:12,m:0,p:0},disabled:!1})]})}),(0,n.jsxs)(o.Z,{sx:{width:"85%",borderTop:"1px solid #cccccc"},children:[.1==f&&j&&(0,n.jsx)(o.Z,{sx:{p:1},children:(0,n.jsx)(W,{})}),.2==f&&(0,n.jsx)(o.Z,{sx:{p:1},children:(0,n.jsx)(DataDistribution,{})}),.3==f&&(0,n.jsx)(o.Z,{sx:{p:1},children:(0,n.jsx)(Q,{})}),1.1==f&&(0,n.jsx)(o.Z,{sx:{p:1},children:(0,n.jsx)($,{})}),2.1==f&&(0,n.jsx)(o.Z,{sx:{p:1},children:(0,n.jsx)(K,{})}),3.1==f&&(0,n.jsx)(o.Z,{sx:{p:1},children:(0,n.jsx)(Y,{pwaJob:v,setPwaJob:C})})]})]})}let TabComponent=e=>{let{text:t,status:l}=e;return(0,n.jsxs)(d.ZP,{container:!0,sx:{m:"auto",height:55},children:[("waiting"==l||"error"==l)&&(0,n.jsx)(o.Z,{sx:{position:"absolute",height:"100%"},children:(0,n.jsxs)(o.Z,{sx:{height:20,position:"relative",top:"35%",left:20},children:["waiting"==l&&(0,n.jsx)(f.Z,{sx:{verticalAlign:"middle"},size:15,thickness:5}),"error"==l&&(0,n.jsx)(X.Z,{})]})}),(0,n.jsx)(s.Z,{sx:{m:"auto",width:"85%",fontSize:13,position:"relative",right:-12},children:t})]})}},56603:function(e,t,l){var n=l(81797),i=l(2265);t.Z=function(e){let t=(0,n.tc)().user["".concat(e,"2i")],l=(0,n.tc)().f2x[e],a=(0,i.useMemo)(()=>{let e=dfd.toJSON(t).filter((e,t)=>l[t]);return(e=new dfd.DataFrame(e)).setIndex({column:e.columns[0],inplace:!0}),e},[t,l]);return[a]}},53146:function(e,t,l){l.d(t,{LA:function(){return DownloadComponent},Wd:function(){return DownloadComponentBarChart},OT:function(){return DownloadComponentGSEA},Z2:function(){return DownloadHeatmap},kr:function(){return downloadImageDensityPlot}});var n=l(57437),i=l(39227),a=l(46776),r=l(52481);function downloadSVG(e,t){let l;l="svg"==e.tagName.toLowerCase()?new XMLSerializer().serializeToString(e):new XMLSerializer().serializeToString(e.childNodes[0].childNodes[0]);let n=new Blob([l],{type:"image/svg+xml;charset=utf-8"});var i=URL.createObjectURL(n);let a=window.document.createElement("a");a.style="display:none",a.download="".concat(t),a.href=i,document.body.appendChild(a),a.click(),document.body.removeChild(a),a.remove()}let downloadImageDensityPlot=async(e,t,l)=>{let n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.appendChild(document.createElementNS("http://www.w3.org/2000/svg","g")),n.appendChild(document.createElementNS("http://www.w3.org/2000/svg","g")),n.appendChild(document.createElementNS("http://www.w3.org/2000/svg","g"));let i=e.container.firstChild.cloneNode(!0);Array.from(i.children).map(e=>n.children[0].appendChild(e));let a=t.firstChild.firstChild.firstChild.cloneNode(!0);Array.from(a.children[0].children).map(e=>n.children[1].appendChild(e)),n.children[1].setAttribute("transform","translate(-20, 200)"),Array.from(a.children[2].children).map(e=>n.children[2].appendChild(e)),n.children[2].setAttribute("transform","translate(-20, 230)"),downloadSVG(n,"DensityPlot_".concat(l,".svg"))},DownloadComponent=e=>{let{scatterRef:t,name:l}=e;return(0,n.jsx)(i.Z,{sx:{height:0},children:(0,n.jsx)(i.Z,{sx:{width:50,position:"relative",top:5,zIndex:10},children:(0,n.jsx)(a.Z,{"aria-label":"download",size:"small",onClick:()=>{let e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.appendChild(document.createElementNS("http://www.w3.org/2000/svg","g"));let n=t.current.container.cloneNode(!0);if(Array.from(n.children[0].children).map(t=>e.children[0].appendChild(t)),3==n.children.length){e.appendChild(document.createElementNS("http://www.w3.org/2000/svg","g")),e.children[1].setAttribute("transform","translate(600, 20)");let t=function(e){let t=document.createElement("div");t.appendChild(e);let l=t.querySelector(".recharts-legend-wrapper"),n=l.querySelectorAll(".recharts-legend-item"),i="http://www.w3.org/2000/svg",a=document.createElementNS(i,"svg");a.setAttribute("xmlns",i),a.setAttribute("width",l.style.width.replace("px","")),a.setAttribute("viewBox","0 0 ".concat(parseInt(l.style.width,10)," ").concat(20*n.length));let r=20;return n.forEach(e=>{let t=e.querySelector("svg path"),l=e.querySelector(".recharts-legend-item-text"),n=document.createElementNS(i,"g");n.setAttribute("transform","translate(0, ".concat(r,")"));let s=document.createElementNS(i,"path");s.setAttribute("d",t.getAttribute("d")),s.setAttribute("fill",t.getAttribute("fill")),s.setAttribute("transform","".concat(t.getAttribute("transform")," scale(0.5)"));let o=document.createElementNS(i,"text");o.textContent=l.textContent,o.setAttribute("x",26),o.setAttribute("y",21),o.setAttribute("fill",l.style.color),o.setAttribute("font-family","Calibri"),o.setAttribute("font-size","16"),n.appendChild(s),n.appendChild(o),a.appendChild(n),r+=20}),a}(n.children[1]);Array.from(t.children).map(t=>e.children[1].appendChild(t))}downloadSVG(e,"".concat(l,"-Scatter"))},sx:{opacity:.5},children:(0,n.jsx)(r.Z,{})})})})},DownloadComponentBarChart=e=>{let{scatterRef:t,name:l}=e;return(0,n.jsx)(i.Z,{sx:{height:0},children:(0,n.jsx)(i.Z,{sx:{width:50,position:"relative",top:5,zIndex:5e3},children:(0,n.jsx)(a.Z,{"aria-label":"download",size:"small",onClick:()=>{let e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.appendChild(document.createElementNS("http://www.w3.org/2000/svg","g"));let n=t.current.container.cloneNode(!0);if(Array.from(n.children[0].children).map(t=>e.children[0].appendChild(t)),3==n.children.length){e.appendChild(document.createElementNS("http://www.w3.org/2000/svg","g")),e.children[1].setAttribute("transform","translate(600, 20)");let t=function(e){let t=document.createElement("div");t.appendChild(e);let l=t.querySelector(".recharts-legend-wrapper"),n=Array.from(l.children[0].children),i="http://www.w3.org/2000/svg",a=document.createElementNS(i,"svg");a.setAttribute("xmlns",i),a.setAttribute("width",l.style.width.replace("px","")),a.setAttribute("viewBox","0 0 ".concat(parseInt(l.style.width,10)," ").concat(30*n.length));let r=25;return n.forEach(e=>{let t=e.querySelector("div"),l=e.querySelector("span"),n=document.createElementNS(i,"g");n.setAttribute("transform","translate(-30, ".concat(r,")"));let s=document.createElementNS(i,"rect");s.setAttribute("x",0),s.setAttribute("y",0),s.setAttribute("width",15),s.setAttribute("height",15),s.setAttribute("fill",t.style.backgroundColor);let o=document.createElementNS(i,"text");o.textContent=l.textContent,o.setAttribute("x",20),o.setAttribute("y",12),o.setAttribute("font-family","Calibri"),o.setAttribute("font-size","12"),o.setAttribute("fill","#000"),n.appendChild(s),n.appendChild(o),a.appendChild(n),r+=30}),a}(n.children[1]);Array.from(t.children).map(t=>e.children[1].appendChild(t))}downloadSVG(e,"".concat(l,"-BarPlot"))},sx:{opacity:.5},children:(0,n.jsx)(r.Z,{})})})})},DownloadHeatmap=e=>{let{scatterRef:t,name:l}=e;return(0,n.jsx)(i.Z,{sx:{height:0},children:(0,n.jsx)(i.Z,{sx:{width:50,position:"relative",top:5,zIndex:5e3},children:(0,n.jsx)(a.Z,{"aria-label":"download",size:"small",onClick:()=>window.print(),sx:{opacity:.5},children:(0,n.jsx)(r.Z,{})})})})},DownloadComponentGSEA=e=>{let{scatterRef:t,name:l}=e;return(0,n.jsx)(i.Z,{sx:{height:0},children:(0,n.jsx)(i.Z,{sx:{width:50,position:"relative",top:5,zIndex:5e3},children:(0,n.jsx)(a.Z,{"aria-label":"download",size:"small",onClick:()=>{let e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.appendChild(document.createElementNS("http://www.w3.org/2000/svg","g")),e.children[0].setAttribute("transform","translate(0,70)");let n=t.current.p1.current.cloneNode(!0);Array.from(n.children[0].children[0].children).map(t=>e.children[0].appendChild(t)),e.appendChild(document.createElementNS("http://www.w3.org/2000/svg","g")),e.children[1].setAttribute("transform","translate(0,291)");let i=t.current.p2.current.cloneNode(!0);Array.from(i.children[0].children[0].children).map(t=>e.children[1].appendChild(t)),e.appendChild(document.createElementNS("http://www.w3.org/2000/svg","g")),e.children[2].setAttribute("transform","translate(0,342)");let a=t.current.p3.current.cloneNode(!0);Array.from(a.children[0].children[0].children).map(t=>e.children[2].appendChild(t)),e.appendChild(document.createElementNS("http://www.w3.org/2000/svg","g")),e.children[3].setAttribute("transform","translate(60,0)");let r=function(e){let t=document.createElement("div");t.appendChild(e);let l=t.querySelector(".MuiBox-root.css-0"),n=l.querySelector(".MuiBox-root.css-3cj8ml p"),i=l.querySelector(".MuiBox-root.css-85t6ji p"),a="http://www.w3.org/2000/svg",r=document.createElementNS(a,"svg");r.setAttribute("xmlns",a),r.setAttribute("width","300"),r.setAttribute("height","100"),r.setAttribute("viewBox","0 0 300 100");let s=document.createElementNS(a,"text");s.textContent=n.textContent,s.setAttribute("x","10"),s.setAttribute("y","30"),s.setAttribute("font-family","Calibri"),s.setAttribute("font-size","20"),s.setAttribute("fill","#787878");let o=document.createElementNS(a,"text");return o.textContent=i.textContent,o.setAttribute("x","10"),o.setAttribute("y","52"),o.setAttribute("font-family","Calibri"),o.setAttribute("font-size","20"),o.setAttribute("fill","#787878"),r.appendChild(s),r.appendChild(o),r}(t.current.values.cloneNode(!0));Array.from(r.children).map(t=>e.children[3].appendChild(t)),downloadSVG(e,"".concat(l))},sx:{opacity:.5},children:(0,n.jsx)(r.Z,{})})})})}},68448:function(e,t,l){l.d(t,{s:function(){return n}});let n=["#636EFA","#EF553B","#00CC96","#AB63FA","#FFA15A","#19D3F3","#FF6692","#B6E880","#FF97FF","#FECB52","#2E91E5","#E15F99","#1CA71C","#FB0D0D","#DA16FF","#222A2A","#B68100","#750D86","#EB663B","#511CFB","#00A08B","#FB00D1","#FC0080","#B2828D","#6C7C32","#778AAE","#862A16","#A777F1","#620042","#1616A7","#DA60CA","#6C4516","#0D2A63","#AF0038"]}}]);