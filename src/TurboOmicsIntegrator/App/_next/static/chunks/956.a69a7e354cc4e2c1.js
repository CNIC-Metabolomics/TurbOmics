"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[956],{61410:function(e,t,l){l.r(t),l.d(t,{default:function(){return ExploreFeatures_ExploreFeaturesContainer}});var i=l(57437),s=l(22079),a=l(8088),o=l(2265),n=l(96350),r=l(81797),c=l(39227),d=l(18687),u=l(85269);let MyButton=e=>{let{setSelectedOmic:t,selfSelectedOmic:l,setSelfSelectedOmic:s,buttonOmic:a,title:n,scroll:c}=e,p=(0,r.tc)().omics.length,h={act:"#424242",noAct:"#FFFFFF"},x={act:"#FFFFFF",noAct:"#424242"},[m,g]=(0,o.useState)(!1),f=l==a||m;return(0,i.jsx)(d.Z,{elevation:3,onMouseEnter:()=>g(!0),onMouseLeave:()=>g(!1),style:{backgroundColor:f?h.act:h.noAct,color:f?x.act:x.noAct,width:"".concat(100/p,"%"),height:70,transition:"all 0.3s ease",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},onClick:()=>{l!=a&&(s(a),setTimeout(()=>t(a),500),c())},children:(0,i.jsx)(u.Z,{variant:"h5",children:n})})};var ExploreFeatures_OmicSelector=function(e){let{selectedOmic:t,setSelectedOmic:l,scrollOmic:s}=e,a=(0,r.tc)().omics,{OMIC2NAME:d}=(0,n.S)(),[u,p]=(0,o.useState)(t);return(0,i.jsx)(c.Z,{display:"flex",children:a.map(e=>(0,i.jsx)(MyButton,{setSelectedOmic:l,selfSelectedOmic:u,setSelfSelectedOmic:p,buttonOmic:e,title:d[e],scroll:()=>s(a.indexOf(e)-a.indexOf(t))},e))})},p=l(33533),h=l(40851),x=l(6093),m=l(46776),ExploreFeatures_TopBarDialog=function(e){let{setExploreF:t,title:l}=e;return(0,i.jsx)(h.Z,{sx:{position:"relative",backgroundColor:"#666666"},children:(0,i.jsx)(x.Z,{children:(0,i.jsxs)(c.Z,{sx:{display:"flex",width:"100%"},children:[(0,i.jsx)(c.Z,{sx:{width:"5%"},children:(0,i.jsx)(m.Z,{edge:"start",color:"inherit",onClick:()=>{t(!1)},"aria-label":"close",children:(0,i.jsx)(p.default,{})})}),(0,i.jsx)(c.Z,{sx:{pt:.5,textAlign:"center",width:"90%"},children:(0,i.jsx)(u.Z,{sx:{ml:2},variant:"h6",component:"div",children:l})}),(0,i.jsx)(c.Z,{sx:{width:"5%"}})]})})})};l(27361);var g=l(36012),f=l(21245),b=l(29818);l(65897);var j=l(33457),y=l(38592),F=l(92069),Z=l(49600),w=l(93202);let MyRenderTopToolbar=e=>{let{table:t,q2cat:l,colFid:s}=e,handleExportRows=e=>{let t=(0,F.iL)({fieldSeparator:",",decimalSeparator:".",useKeysAsHeaders:!0,filename:"Feature_Table"}),i=e.map(e=>e.original);Object.keys(l).length>0&&(i=i.map(e=>({...e,Category_ID:void 0===l[e[s.id]]||0==l[e[s.id]].length?"":l[e[s.id]].map(e=>e.native).join(";"),Category_Name:void 0===l[e[s.id]]||0==l[e[s.id]].length?"":l[e[s.id]].map(e=>e.name).join(";")})));let a=(0,F.gB)(t)(i);(0,F.LR)(t)(a)};return(0,i.jsxs)(c.Z,{sx:{display:"flex",gap:"16px",padding:"8px",flexWrap:"wrap"},children:[(0,i.jsx)(c.Z,{children:(0,i.jsx)(y.UN,{table:t})}),(0,i.jsx)(Z.Z,{disabled:0===t.getFilteredRowModel().rows.length,onClick:()=>handleExportRows(t.getFilteredRowModel().rows),startIcon:(0,i.jsx)(w.Z,{}),children:"Export Table"})]})};var ExploreFeatures_MyMRTable=e=>{let{omic:t,sign:l,thr:s,f2MeanL:a,q2cat:n,colFid:d}=e,u=(0,r.tc)().user["".concat(t,"2i")],p=(0,b.a0)().MOFA.displayOpts.selectedPlot.Factor,h=(0,b.a0)().MOFA.displayOpts.selectedPlot.mdataCol,x=(0,r.tc)().mdataType[h],m=(0,b.a0)().MOFA.data.loadings[t][p],g=(0,o.useMemo)(()=>{let e=[];return e=e.concat(u.columns.map(e=>({header:e,accessorKey:e,muiTableHeadCellProps:{align:"left"},muiTableBodyCellProps:{align:"left"},filterFn:"contains"}))),"categorical"==x.type&&e.push(...x.levels.map(e=>({header:"ZÌ„(".concat(e,")"),accessorKey:e,muiTableHeadCellProps:{align:"left"},muiTableBodyCellProps:{align:"center"},filterFn:"greaterThan"}))),e.push({header:p,accessorKey:p,muiTableHeadCellProps:{align:"left"},muiTableBodyCellProps:{align:"center"},filterFn:"up"==l?"greaterThan":"lessThan"}),e},[u,x,p,l]),y=(0,o.useMemo)(()=>{let e=(0,f.$i)(u.fillNa("")),t={};return Object.keys(a).map(i=>{("up"==l&&m[i]>s||"down"==l&&m[i]<s)&&(t[i]={...e[i],...a[i],[p]:Math.round(1e4*m[i])/1e4})}),t=Object.values(t)},[u,a,p,m,l,s]),F=(0,j.X0)({columns:g,data:y,layoutMode:"grid",enableColumnResizing:!0,enableSelectAll:!1,enableColumnFilterModes:!0,enableColumnFilters:!0,enableColumnOrdering:!0,enableGrouping:!0,enableColumnPinning:!0,enableFacetedValues:!0,enableRowActions:!1,enableRowSelection:!1,enableDensityToggle:!1,enableFullScreenToggle:!0,enableGlobalFilter:!1,initialState:{density:"compact",showColumnFilters:!0,showGlobalFilter:!1,columnFilters:[{id:p,value:Math.round(1e4*s)/1e4}],sorting:[{id:p,desc:"up"==l}]},paginationDisplayMode:"pages",positionToolbarAlertBanner:"bottom",muiPaginationProps:{rowsPerPageOptions:[10],shape:"rounded",variant:"outlined"},renderTopToolbar:e=>{let{table:t}=e;return(0,i.jsx)(MyRenderTopToolbar,{table:t,q2cat:n,colFid:d})}});return(0,i.jsx)(c.Z,{sx:{px:5,pb:3},children:(0,i.jsx)(j.P2,{table:F})})},M=l(28811),v=l.n(M);let C=v()(()=>l.e(818).then(l.bind(l,77818)),{loadableGenerated:{webpack:()=>[77818]}}),O=v()(()=>l.e(548).then(l.bind(l,21548)),{loadableGenerated:{webpack:()=>[21548]}});var ExploreFeatures_MainContent=function(e){let{omic:t,thrLRef:s}=e,{OMIC2NAME:a}=(0,n.S)(),d=(0,r.tc)().user["".concat(t,"2i")],p=(0,b.a0)().MOFA.displayOpts.selectedPlot.Factor,h=(0,b.a0)().MOFA.data.loadings[t][p],x=(0,o.useMemo)(()=>{let e=(0,f.$i)(d),t={up:[],down:[]};return Object.keys(h).map(l=>{h[l]>s.up&&t.up.push(e[l]),h[l]<s.down&&t.down.push(e[l])}),t},[d,h,s.up,s.down]),m=(0,b.a0)().MOFA.displayOpts.selectedPlot.mdataCol,j=(0,r.tc)().mdataType[m],y=(0,r.tc)().norm["x".concat(t)],F=(0,o.useMemo)(()=>{let e={},t=(0,f.$i)(y),l=[...x.up.map(e=>Object.values(e)[0]),...x.down.map(e=>Object.values(e)[0])],i={};return Object.keys(t).map(e=>{i[e]={},l.map(l=>i[e][l]=t[e][l])}),l.map(t=>{e[t]={}}),"categorical"==j.type&&j.levels.map(t=>{let l=new dfd.DataFrame(j.level2id[t].map(e=>i[e]).filter(e=>void 0!=e)),s=l.mean({axis:0}).round(4);s.index.map((l,i)=>{e[l][t]=s.values[i]})}),e},[y,j,x.down,x.up]),[Z,w]=(0,o.useState)("m"==t?null:{label:d.columns[0],id:d.columns[0]}),[M,v]=(0,o.useState)({up:{},down:{}}),T=(0,o.useMemo)(()=>{let e={};return e.up=e=>v(t=>({...t,up:e})),e.down=e=>v(t=>({...t,down:e})),e},[v]),[A,S]=(0,o.useState)(null);return(0,o.useEffect)(()=>{if("m"!=t)return;let loadMetaboID=async()=>{S(l(91794)),console.log("MetaboID was imported")};loadMetaboID()},[t]),(0,i.jsx)(g.tv,{"aria-label":"Omic Positive/Negative Change",children:["up","down"].map(e=>(0,i.jsx)(g.jw,{children:(0,i.jsxs)(c.Z,{sx:{p:2,textAlign:"center"},children:[(0,i.jsxs)(u.Z,{variant:"h5",children:["up"==e?"Positively":"Negatively"," Associated ",a[t]]}),(0,i.jsx)(c.Z,{children:(0,i.jsxs)(c.Z,{children:[(0,i.jsx)(ExploreFeatures_MyMRTable,{omic:t,sign:e,thr:s[e],f2MeanL:F,q2cat:M[e],colFid:Z}),x[e].length>0&&(0,i.jsx)(c.Z,{children:"q"==t||"t"==t?(0,i.jsx)(C,{omic:t,fRef:x[e],f2MeanL:F,colFid:Z,setColFid:w,setQ2cat:T[e]}):(0,i.jsx)(i.Fragment,{children:A&&(0,i.jsx)(O,{fRef:x[e],f2MeanL:F,colFid:Z,setColFid:w,setM2cat:T[e],MetaboID:A})})})]})})]})},e))})},T=l(35843),A=l(91797),S=l(52151),E=l(91928),P=l(80565),k=l(37682),R=l(666);let B=(0,T.ZP)(s.Z)(e=>{let{theme:t}=e;return{"& .MuiDialogContent-root":{padding:t.spacing(2)},"& .MuiDialogActions-root":{padding:t.spacing(1)}}});function HelpSection(){let[e,t]=o.useState(!1),handleClose=()=>{t(!1)};return(0,i.jsxs)(c.Z,{children:[(0,i.jsx)(m.Z,{"aria-label":"question",size:"large",onClick:()=>{t(!0)},children:(0,i.jsx)(R.Z,{fontSize:"inherit"})}),(0,i.jsxs)(B,{onClose:handleClose,"aria-labelledby":"customized-dialog-title",open:e,maxWidth:"lg",children:[(0,i.jsx)(A.Z,{sx:{m:0,p:2},id:"customized-dialog-title",children:"Multi-Omics Factor Analysis (MOFA) - Explore Features"}),(0,i.jsx)(m.Z,{"aria-label":"close",onClick:handleClose,sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]},children:(0,i.jsx)(p.default,{})}),(0,i.jsxs)(S.Z,{sx:{textAlign:"justify"},dividers:!0,children:[(0,i.jsx)(u.Z,{gutterBottom:!0,children:"This subsection provides a detailed exploration of the top most positively and negatively associated biomolecules for the selected factor within each omic. This in-depth analysis is crucial for interpreting the biological significance of the latent factors identified by MOFA."}),(0,i.jsxs)(u.Z,{gutterBottom:!0,children:["At the top of the subsection, a ",(0,i.jsx)("strong",{children:"navigation bar"})," allows you to switch between different omic datasets. Within each omic, you can also choose to ",(0,i.jsx)("strong",{children:"focus on either the positively or negatively associated biomolecules"}),"."]}),(0,i.jsx)(u.Z,{gutterBottom:!0,children:"The two main components for the analysis are:"}),(0,i.jsx)(c.Z,{sx:{pl:4},children:(0,i.jsxs)(P.Z,{sx:{listStyleType:"disc",listStyle:"outside"},children:[(0,i.jsxs)(k.ZP,{sx:{display:"list-item",textAlign:"justify"},children:[(0,i.jsx)("strong",{children:"Biomolecule Information Table"}),": This table lists the selected biomolecules and provides additional context by displaying the average quantitative value of each biomolecule across different sample groups."]}),(0,i.jsxs)(k.ZP,{sx:{display:"list-item",textAlign:"justify"},children:[(0,i.jsx)("strong",{children:"Overrepresentation Analysis (ORA):"}),(0,i.jsxs)(P.Z,{sx:{listStyleType:"disc",listStyle:"outside"},children:[(0,i.jsx)(k.ZP,{sx:{display:"list-item",textAlign:"justify"},children:"To aid in the biological interpretation of your results, ORA is performed using databases such as KEGG, REACTOME, and GO. This analysis helps identify significantly enriched biological pathways, processes, or functions among the selected biomolecules."}),(0,i.jsxs)(k.ZP,{sx:{display:"list-item",textAlign:"justify"},children:[(0,i.jsx)("strong",{children:"Background and Target Sets"}),": The enrichment analysis uses all uploaded biomolecules as the background set, while the target set consists of the biomolecules selected for the analyzed factor."]}),(0,i.jsxs)(k.ZP,{sx:{display:"list-item",textAlign:"justify"},children:[(0,i.jsx)("strong",{children:"Exploration of Enriched Categories"}),": By clicking on a category, you can view all biomolecules associated it, with the ones selected for the factor highlighted in blue."]})]})]})]})})]}),(0,i.jsx)(E.Z,{children:(0,i.jsx)(c.Z,{sx:{textAlign:"justify",p:2},children:(0,i.jsx)(u.Z,{gutterBottom:!0,children:"[1] Argelaguet R, Velten B, Arnol D, Dietrich S, Zenz T, Marioni JC, Buettner F, Huber W, Stegle O. Multi-Omics Factor Analysis-a framework for unsupervised integration of multi-omics data sets. Mol Syst Biol. 2018 Jun 20;14(6):e8124. doi: 10.15252/msb.20178124. PMID: 29925568; PMCID: PMC6010767."})})})]})]})}let _=o.forwardRef(function(e,t){return(0,i.jsx)(a.Z,{direction:"up",ref:t,...e})});var ExploreFeatures_ExploreFeaturesContainer=function(e){let{exploreF:t,setExploreF:l,Factor:a,mdataCol:n,thrLRef:d,setEFLoading:u}=e,{omics:p}=(0,r.tc)(),[h,x]=(0,o.useState)(p[0]),m=(0,o.useRef)(null);return(0,o.useEffect)(()=>{u(!1)},[u]),(0,i.jsxs)(s.Z,{fullScreen:!0,open:t,TransitionComponent:_,children:[(0,i.jsx)(ExploreFeatures_TopBarDialog,{setExploreF:l,title:"Explore Features: ".concat(a," vs ").concat(n)}),(0,i.jsx)(ExploreFeatures_OmicSelector,{selectedOmic:h,setSelectedOmic:x,scrollOmic:e=>{let t=m.current,l=t.clientWidth;t.scrollLeft=t.scrollLeft+e*l}}),(0,i.jsx)(c.Z,{sx:{height:0,zIndex:1e3},children:(0,i.jsx)(HelpSection,{})}),(0,i.jsx)(c.Z,{sx:{overflowY:"auto",overflowX:"hidden",mt:1},ref:m,children:(0,i.jsx)(c.Z,{sx:{display:"flex",width:"".concat(100*p.length,"%")},children:p.map(e=>(0,i.jsx)(c.Z,{sx:{width:"".concat(100/p.length,"%"),opacity:h==e?1:0,transition:"all ease 0.5s"},children:h==e&&(0,i.jsx)(ExploreFeatures_MainContent,{omic:e,thrLRef:d[e]})},e))})})]})}}}]);