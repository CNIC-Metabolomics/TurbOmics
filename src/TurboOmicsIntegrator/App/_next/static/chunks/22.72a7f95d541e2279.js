"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[22],{52481:function(e,t,i){var n=i(26314);t.Z=void 0;var a=n(i(80984)),o=i(57437);t.Z=(0,a.default)((0,o.jsx)("path",{d:"M5 20h14v-2H5zM19 9h-4V3H9v6H5l7 7z"}),"Download")},93202:function(e,t,i){var n=i(26314);t.Z=void 0;var a=n(i(80984)),o=i(57437);t.Z=(0,a.default)((0,o.jsx)("path",{d:"M19 9h-4V3H9v6H5l7 7zM5 18v2h14v-2z"}),"FileDownload")},29389:function(e,t,i){var n=i(26314);t.Z=void 0;var a=n(i(80984)),o=i(57437);t.Z=(0,a.default)((0,o.jsx)("path",{d:"M11 9h2v2h-2zm-2 2h2v2H9zm4 0h2v2h-2zm2-2h2v2h-2zM7 9h2v2H7zm12-6H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2M9 18H7v-2h2zm4 0h-2v-2h2zm4 0h-2v-2h2zm2-7h-2v2h2v2h-2v-2h-2v2h-2v-2h-2v2H9v-2H7v2H5v-2h2v-2H5V5h14z"}),"Gradient")},20626:function(e,t,i){i.d(t,{$Y:function(){return MyScatter2D},Mz:function(){return ShowLabels},T3:function(){return MyScatter}});var n=i(57437),a=i(81797),o=i(39227),s=i(14172),d=i(88444),c=i(85269),h=i(68448),u=i(2265),x=i(41125),j=i(16573),Z=i(24235),A=i(33343),k=i(50039),F=i(86812),I=i(87586),D=i(561),N=i(79857),V=i(96350),R=i(53146);function MyScatter(e){let t,{omic:i,scatterData:s,mdataCol:d,PCA:c}=e,[N,_]=(0,u.useState)(!1),{OMIC2NAME:H}=(0,V.S)(),q=(0,u.useRef)(),W=(0,a.tc)().mdataType[d].type;return"categorical"==W&&(t="category"),"numeric"==W&&(t="number"),(0,n.jsxs)(o.Z,{children:[(0,n.jsx)(o.Z,{sx:{},children:(0,n.jsx)(R.LA,{scatterRef:q,name:"PCA-1D-".concat(H[i])})}),(0,n.jsxs)(x.G,{width:600,height:550,ref:q,margin:{top:20,right:20,bottom:20,left:20},children:[(0,n.jsx)(j.q,{}),(0,n.jsx)(Z.K,{type:t,dataKey:"mdataValue",name:d,allowDuplicatedCategory:!1,style:{fontFamily:"Calibri"},children:(0,n.jsx)(A._,{value:d,offset:-10,position:"insideBottom",style:{fontFamily:"Calibri"}})}),(0,n.jsx)(k.B,{type:"number",dataKey:"projection",name:"PCA ".concat(c),style:{fontFamily:"Calibri"},children:(0,n.jsx)(A._,{value:"PCA ".concat(c),offset:20,position:"insideLeft",angle:-90,style:{fontFamily:"Calibri"}})}),(0,n.jsx)(F.u,{cursor:{strokeDasharray:"3 3"},content:(0,n.jsx)(CustomTooltip,{})}),(0,n.jsx)(I.b,{data:s,fill:h.s[0],children:N&&(0,n.jsx)(D.e,{dataKey:"element",position:"right",style:{fontFamily:"Calibri"}})})]}),(0,n.jsx)(ShowLabels,{showLabels:N,setShowLabels:_})]})}function MyScatter2D(e){let{omic:t,scatterData:i,selectedPlot2D:a}=e,{OMIC2NAME:s}=(0,V.S)(),d=(0,u.useRef)(),[c,_]=(0,u.useState)(!1);return(0,n.jsxs)(o.Z,{children:[(0,n.jsx)(o.Z,{children:(0,n.jsx)(R.LA,{scatterRef:d,name:"PCA-2D-".concat(s[t])})}),(0,n.jsxs)(x.G,{ref:d,width:600,height:550,margin:{top:20,right:20,bottom:20,left:20},children:[(0,n.jsx)(j.q,{}),(0,n.jsx)(Z.K,{type:"number",dataKey:"x",name:"PCA ".concat(a.x),style:{fontFamily:"Calibri"},children:(0,n.jsx)(A._,{value:"PCA ".concat(a.x),offset:-10,position:"insideBottom",style:{fontFamily:"Calibri"}})}),(0,n.jsx)(k.B,{type:"number",dataKey:"y",name:"PCA ".concat(a.y),style:{fontFamily:"Calibri"},children:(0,n.jsx)(A._,{value:"PCA ".concat(a.y),offset:20,position:"insideLeft",angle:-90,style:{fontFamily:"Calibri"}})}),(0,n.jsx)(F.u,{cursor:{strokeDasharray:"3 3"},content:(0,n.jsx)(CustomTooltip,{})}),Object.keys(i).length>1&&(0,n.jsx)(N.D,{verticalAlign:"top"}),Object.keys(i).map((e,t)=>(0,n.jsx)(I.b,{data:i[e],fill:h.s[t%h.s.length],name:e,children:c&&(0,n.jsx)(D.e,{dataKey:"element",position:"top",style:{fontFamily:"Calibri"}})},e))]}),(0,n.jsx)(o.Z,{sx:{mt:1},children:(0,n.jsx)(ShowLabels,{showLabels:c,setShowLabels:_})})]})}let ShowLabels=e=>{let{showLabels:t,setShowLabels:i}=e;return(0,n.jsx)(o.Z,{sx:{mt:0,display:"flex",justifyContent:"center"},children:(0,n.jsxs)(o.Z,{sx:{width:100,textAlign:"center",position:"relative",left:30,border:"0px solid red"},children:[(0,n.jsx)(s.Z,{component:"legend",sx:{pt:0},children:"Show Labels"}),(0,n.jsx)(d.Z,{sx:{position:"relative",top:-10,border:"0px solid red"},checked:t,onChange:e=>{i(e=>!e)},inputProps:{"aria-label":"controlled"}})]})})},CustomTooltip=e=>{let{active:t,payload:i}=e;return t&&i&&i.length?(0,n.jsxs)(o.Z,{className:"custom-tooltip",sx:{backgroundColor:"rgba(5,5,5,0.8)",color:"rgba(250,250,250,0.8)",border:"1px solid rgba(50, 50, 50, 0.8)",padding:1,borderRadius:1},children:[(0,n.jsx)(c.Z,{variant:"h8",sx:{display:"block"},children:"".concat(i[0].payload.element)}),(0,n.jsx)(c.Z,{variant:"h9",sx:{display:"block"},children:"".concat(i[0].name,": ").concat("string"==typeof i[0].value?i[0].value:i[0].value.toFixed(3))}),(0,n.jsx)(c.Z,{variant:"h9",sx:{display:"block"},children:"".concat(i[1].name,": ").concat(i[1].value.toFixed(3))})]}):null}},52022:function(e,t,i){i.r(t),i.d(t,{default:function(){return PWA_Results}});var n=i(57437),a=i(39227),o=i(2265),s=i(49600),d=i(85269),c=i(47042),h=i(33457),u=i(96350),x=i(92069);function handleExportData(e,t,i){let n=(0,x.iL)({fieldSeparator:",",decimalSeparator:".",columnHeaders:t,filename:i}),a=(0,x.gB)(n)(e);(0,x.LR)(n)(a)}var j=i(93202),Z=i(81797);function calculateBackgroundColorRed(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.2;return{backgroundColor:"rgba(".concat(255,",").concat(255-255/(i-t)*(e-t),",").concat(255-255/(i-t)*(e-t),", ").concat(n,")")}}let A={muiTableHeadCellProps:{align:"center"},muiTableBodyCellProps:{align:"center"},size:150};var PWA_ModelInfo=function(e){let{runId:t,model_info:i,view:x,workingOmics:k}=e,{OMIC2NAME:F,API_URL:I}=(0,u.S)(),{jobID:D}=(0,Z.tc)(),[N,V]=(0,o.useState)({status:"ready"}),R=(0,o.useRef)(),_=(0,o.useCallback)(async e=>{console.log("fetching stats model");let t=await fetch("".concat(I,"/get_stats_model/").concat(D,"/").concat(x,"/").concat(e)),i=await t.json();console.log(i),"waiting"!=i.status&&(V(i),clearInterval(R.current))},[I,D,x,R]);(0,o.useEffect)(()=>{if(console.log("useEffect"),"ready"!=N.status)return;let e=setInterval(()=>_(t),5e3);return R.current=e,()=>clearInterval(e)},[_,R,N,t]);let H=(0,o.useMemo)(()=>{let e=[];return"Single-View"==x&&(e=k.map(e=>({header:"".concat(F[e]," (%)"),id:e,accessorFn:t=>(100*t.omic_weight[F[e]]).toFixed(2),...A,Cell:e=>{let{renderedCellValue:t,row:i}=e;return(0,n.jsx)(a.Z,{sx:{backgroundColor:calculateBackgroundColorRed(t,0,100),py:1},children:t})}}))),e},[k,F,x]),q=(0,o.useMemo)(()=>[{accessorKey:"LV",header:"Latent Variable",...A},...H,{id:"R2",header:"R2",accessorFn:e=>"".concat(Math.round(1e4*e.R2)/1e4),...A,Cell:e=>{let{renderedCellValue:t,row:i}=e;return(0,n.jsx)(a.Z,{sx:{backgroundColor:calculateBackgroundColorRed(t,0,1),py:1},children:t})}},{id:"pv",header:"p-value",accessorFn:e=>"".concat(e.pv<1e-4?e.pv.toExponential(2):e.pv.toFixed(5)),...A,Cell:e=>{let{renderedCellValue:t,row:i}=e;return(0,n.jsx)(a.Z,{sx:{backgroundColor:function(e){let t=Math.min(10,Math.max(1,-Math.log10(e)));return{backgroundColor:e<.1?"rgba(".concat(255-(t-1)*255/9,",").concat(-55/9*t+255+55/9,",").concat(255-(t-1)*255/9,", 0.25)"):"rgba(255,255,255,0.5)"}}(t),py:1},children:t})}}],[H]),W=(0,h.X0)({columns:q,data:i.LV,muiTableBodyCellProps:{sx:{p:0}},enableColumnFilterModes:!1,enableColumnOrdering:!1,enableGrouping:!1,enableColumnPinning:!1,enableFacetedValues:!1,enableRowActions:!1,enableRowSelection:!1,enableGlobalFilter:!1,enableColumnActions:!1,enableSorting:!1,enableDensityToggle:!1,enableHiding:!1,enableFullScreenToggle:!1,enableFilters:!1,enableBottomToolbar:!1,renderTopToolbarCustomActions:e=>{let{table:t}=e;return(0,n.jsxs)(a.Z,{sx:{width:"100%",display:"flex",gap:"16px",padding:"8px",flexWrap:"wrap",alignItems:"center",justifyContent:"space-between"},children:[(0,n.jsx)(a.Z,{children:(0,n.jsx)(s.Z,{onClick:()=>handleExportData(t.getRowModel().rows.map(e=>e._valuesCache),t.getAllColumns().map(e=>({key:e.columnDef.id,displayLabel:e.columnDef.header})),"PathwayAnalysis_Model"),startIcon:(0,n.jsx)(j.Z,{}),children:"Export Table"})}),(0,n.jsx)(a.Z,{children:(0,n.jsx)(d.Z,{variant:"h6",children:"Summary statistics"})}),(0,n.jsxs)(a.Z,{sx:{border:"0px solid red",textAlign:"center"},children:[(0,n.jsx)(a.Z,{sx:{backgroundColor:calculateBackgroundColorRed(i.model.R2,0,1,.1),borderRadius:2,px:2},children:(0,n.jsxs)(d.Z,{variant:"body1",children:["Model R2 = ",i.model.R2.toFixed(4)]})}),(0,n.jsxs)(a.Z,{sx:{backgroundColor:"ok"==N.status&&N.statsModel.R2pv<=.1?"rgba(0,200,0,0.1)":"white",borderRadius:2,transition:"all 1s ease",display:"flex",alignItems:"center",justifyContent:"center",mt:1},children:[(0,n.jsxs)(d.Z,{variant:"body1",children:["p-value ","≤"," "]}),(0,n.jsxs)(a.Z,{sx:{pl:.75},children:[["ready","waiting"].includes(N.status)&&(0,n.jsx)(a.Z,{sx:{pt:.5},children:(0,n.jsx)(c.Z,{size:15,disableShrink:!0})}),"ok"==N.status&&(0,n.jsx)(d.Z,{variant:"body1",children:N.statsModel.R2pv})]})]})]})]})}});return(0,n.jsx)(a.Z,{children:(0,n.jsx)(h.P2,{table:W})})},k=i(70812),F=i(67248),I=i(41125),D=i(16573),N=i(24235),V=i(33343),R=i(50039),_=i(86812),H=i(79857),q=i(87586),W=i(561),U=i(68448),$=i(20626),Y=i(53146);let AxisSelector=e=>{let{selectedLV:t,setSelectedLV:i,projOpts:s,showLabels:d,setShowLabels:c}=e;return(0,n.jsxs)(a.Z,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[(0,n.jsx)(a.Z,{sx:{position:"relative",top:-50,left:-30},children:(0,n.jsx)($.Mz,{showLabels:d,setShowLabels:c})}),(0,n.jsx)(a.Z,{sx:{px:4},children:(0,n.jsx)(k.Z,{value:t.x,onChange:(e,t)=>t&&i(e=>({...e,x:t})),isOptionEqualToValue:(e,t)=>e.id===t.id,id:"xAxis",options:s,sx:{width:200},renderInput:e=>(0,n.jsx)(F.Z,{...e,label:"X Axis"}),renderOption:(e,t)=>(0,o.createElement)("li",{...e,key:t.label},t.label)})}),(0,n.jsx)(a.Z,{sx:{p:4},children:(0,n.jsx)(k.Z,{value:t.y,onChange:(e,t)=>t&&i(e=>({...e,y:t})),isOptionEqualToValue:(e,t)=>e.id===t.id,id:"yAxis",options:s,sx:{width:200},renderInput:e=>(0,n.jsx)(F.Z,{...e,label:"Y Axis"}),renderOption:(e,t)=>(0,o.createElement)("li",{...e,key:t.label},t.label)})})]})},CustomTooltip=e=>{let{active:t,payload:i}=e;return t&&i&&i.length?(0,n.jsxs)(a.Z,{className:"custom-tooltip",sx:{backgroundColor:"rgba(5,5,5,0.8)",color:"rgba(250,250,250,0.8)",border:"1px solid rgba(50, 50, 50, 0.8)",padding:1,borderRadius:1},children:[(0,n.jsx)(d.Z,{variant:"h8",sx:{display:"block"},children:"".concat(i[0].payload.sample)}),i[0].payload.g&&(0,n.jsx)(d.Z,{variant:"h8",sx:{display:"block"},children:"Group: ".concat(i[0].payload.g)}),(0,n.jsx)(d.Z,{variant:"h9",sx:{display:"block"},children:"".concat(i[0].name,": ").concat(i[0].value.toFixed(3))}),(0,n.jsx)(d.Z,{variant:"h9",sx:{display:"block"},children:"".concat(i[1].name,": ").concat(i[1].value.toFixed(3))})]}):null};var PWA_ScatterPlot=function(e){let{projections:t,nLV:i,mdataCategorical:s}=e,d=(0,Z.tc)().user.mdata.column(s.mdataCol),c=(0,o.useMemo)(()=>t.map(e=>({sample:e.sample,g:d.values[d.index.indexOf(e.sample)],...e.proj.reduce((e,t,i)=>({...e,["LV".concat(i+1)]:t}),{})})),[t,d]),h=(0,o.useMemo)(()=>{let e=[];for(let t=1;t<=i;t++)e.push("LV".concat(t));return e.map(e=>({label:e,id:e}))},[i]),[u,x]=(0,o.useState)({x:h[0],y:h[1]}),[j,A]=(0,o.useState)(!1),k=(0,o.useRef)();return(0,n.jsx)(a.Z,{children:(0,n.jsxs)(a.Z,{sx:{display:"flex",justifyContent:"space-evenly",alignItems:"center",overflow:"auto"},children:[(0,n.jsxs)(a.Z,{children:[(0,n.jsx)(a.Z,{sx:{width:0},children:(0,n.jsx)(Y.LA,{scatterRef:k,name:"PathwayAnalysis"})}),(0,n.jsxs)(I.G,{ref:k,width:540,height:500,margin:{top:5,right:20,bottom:20,left:20},children:[(0,n.jsx)(D.q,{}),(0,n.jsx)(N.K,{type:"number",dataKey:u.x.label,name:u.x.label,style:{fontFamily:"Calibri"},children:(0,n.jsx)(V._,{value:"".concat(u.x.label),offset:-10,position:"insideBottom",style:{fontFamily:"Calibri"}})}),(0,n.jsx)(R.B,{type:"number",dataKey:u.y.label,name:u.y.label,style:{fontFamily:"Calibri"},children:(0,n.jsx)(V._,{value:u.y.label,offset:20,position:"insideLeft",angle:-90,style:{fontFamily:"Calibri"}})}),(0,n.jsx)(_.u,{cursor:{strokeDasharray:"3 3"},content:(0,n.jsx)(CustomTooltip,{})}),(0,n.jsx)(H.D,{verticalAlign:"top"}),(0,n.jsx)(q.b,{name:s.g1.id,data:c.filter(e=>e.g==s.g1.id),fill:U.s[0],children:j&&(0,n.jsx)(W.e,{dataKey:"sample",position:"top",style:{fontFamily:"Calibri"}})}),(0,n.jsx)(q.b,{name:s.g2.id,data:c.filter(e=>e.g==s.g2.id),fill:U.s[1],children:j&&(0,n.jsx)(W.e,{dataKey:"sample",position:"top",style:{fontFamily:"Calibri"}})})]})]}),(0,n.jsx)(a.Z,{sx:{},children:(0,n.jsx)(AxisSelector,{selectedLV:u,setSelectedLV:x,projOpts:h,showLabels:j,setShowLabels:A})})]})})},J=i(22079),ee=i(91797),et=i(52151),el=i(91928),ei=i(29389),en=i(29818),ea=i(21245),er=i(38083);let ViewComponent=e=>{let{path_info:t,rId2info:i,view:s,omic:c}=e,[h,u]=(0,o.useState)({});return(0,n.jsxs)(a.Z,{sx:{display:"flex",flexDirection:"Multi-View"==s?"row":"column",justifyContent:"space-evenly"},children:[(0,n.jsx)(a.Z,{sx:{width:"Multi-View"==s?"45%":"98%"},children:(0,n.jsx)(PathwayTable,{pathwaySelection:h,setPathwaySelection:u,path_info:t,omic:c})}),(0,n.jsxs)(a.Z,{sx:{width:"Multi-View"==s?"45%":"98%",display:"flex",alignItems:"center",mt:"Single-View"==s?2:0},children:[Object.keys(h).length>0&&(0,n.jsx)(a.Z,{sx:{width:"100%"},children:(0,n.jsx)(FeatureTable,{pathway:Object.keys(h)[0],path_info:t,rId2info:i,view:s})}),0==Object.keys(h).length&&(0,n.jsx)(a.Z,{sx:{border:"2px dashed grey",borderRadius:"16px",display:"flex",justifyContent:"center",alignItems:"center",width:"100%",textAlign:"center",padding:"16px",boxSizing:"border-box"},children:(0,n.jsx)(d.Z,{variant:"body1",children:"Click pathway to show biomolecules"})})]})]})},PathwayTable=e=>{let{pathwaySelection:t,setPathwaySelection:i,path_info:c,omic:x}=e,{OMIC2NAME:Z}=(0,u.S)(),A=(0,o.useMemo)(()=>c.filter(e=>e.VIP>1).map(e=>({...e,N:e.molecular_importance.length})),[c]),k=(0,o.useMemo)(()=>{let e=0;return A.map(t=>{t.VIP>e&&(e=t.VIP)}),e},[A]),F=(0,o.useMemo)(()=>[{accessorKey:"Path_ID",header:"Path_ID",size:100},{accessorKey:"Name",header:"Name"},{accessorKey:"N",header:"N.",size:50,muiTableBodyCellProps:{align:"center"}},{id:"VIP",accessorFn:e=>e.VIP.toFixed(4),header:"VIP",size:60,muiTableBodyCellProps:{align:"center"},Cell:e=>{let{renderedCellValue:t,row:i}=e;return(0,n.jsx)(a.Z,{sx:{backgroundColor:calculateBackgroundColorRed(t,1,k),py:1.5,width:"100%",height:"100%"},children:t})}}],[k]),I=(0,o.useRef)(null),[D,N]=(0,o.useState)(!0),[V,R]=(0,o.useState)([{id:"VIP",desc:!0}]);(0,o.useEffect)(()=>{N(!1)},[]),(0,o.useEffect)(()=>{try{var e,t;null===(t=I.current)||void 0===t||null===(e=t.scrollToIndex)||void 0===e||e.call(t,0)}catch(e){console.error(e)}},[V]);let _=(0,h.X0)({columns:F,data:A,layoutMode:"grid",enableRowSelection:!0,enableMultiRowSelection:!1,getRowId:e=>e.Path_ID,muiTableBodyRowProps:e=>{let{row:t}=e;return{onClick:t.getToggleSelectedHandler(),sx:{cursor:"pointer"}}},muiTableBodyCellProps:{sx:{p:0}},enableStickyHeader:!0,enablePagination:!1,muiTableContainerProps:{sx:{minHeight:"400px",maxHeight:"400px"}},enableBottomToolbar:!1,enableTopToolbar:!0,onRowSelectionChange:i,state:{rowSelection:t,sorting:V,isLoading:D},rowVirtualizerInstanceRef:I,rowVirtualizerOptions:{overscan:5},onSortingChange:R,enableRowVirtualization:!0,enableDensityToggle:!1,enableHiding:!1,enableFullScreenToggle:!1,enableFilters:!0,enableGlobalFilter:!1,initialState:{showColumnFilters:!0},positionToolbarAlertBanner:"none",renderTopToolbarCustomActions:e=>{let{table:t}=e;return(0,n.jsxs)(a.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%"},children:[(0,n.jsx)(a.Z,{sx:{width:"33%"},children:(0,n.jsx)(s.Z,{onClick:()=>handleExportData(A,t.getAllColumns().map(e=>({key:e.columnDef.id,displayLabel:e.columnDef.header})).filter(e=>"Select"!=e.displayLabel),"PathwayImportance"),startIcon:(0,n.jsx)(j.Z,{}),children:"Export Table"})}),x&&(0,n.jsx)(a.Z,{sx:{width:"33%",textAlign:"center"},children:(0,n.jsx)(d.Z,{variant:"h6",children:Z[x]})}),(0,n.jsx)(a.Z,{sx:{width:"33%"}})]})}});return(0,n.jsx)(a.Z,{children:(0,n.jsx)(h.P2,{table:_})})},FeatureTable=e=>{let{pathway:t,path_info:i,rId2info:c,view:x}=e,{OMIC2NAME:Z}=(0,u.S)(),[A,k]=(0,o.useMemo)(()=>{let e=i.filter(e=>e.Path_ID==t)[0],n=e.molecular_importance.map(e=>({...e,...c[e.omic][e.fid]})).map(e=>({...e,Name:"q"==e.omic||"t"==e.omic?"".concat(e.name," | ").concat(e.description.replace(/\[.*\]$/,"")):e.Name,omicName:Z[e.omic]}));return[e,n]},[t,Z,i,c]),F=(0,o.useMemo)(()=>{let e=0;return k.map(t=>{Math.abs(t.PC1_Loadings)>e&&(e=Math.abs(t.PC1_Loadings))}),e},[k]),I=(0,o.useMemo)(()=>{let e="Multi-View"==x?[{header:"Omic",accessorKey:"omicName",size:100}]:[];return[{header:"#",accessorKey:"xId",size:100,muiTableBodyCellProps:{sx:{px:2,py:0}}},...e,{header:"ID",accessorKey:"uId",size:100},{header:"Name",accessorKey:"Name"},{header:"Loading",id:"PC1_Loadings",accessorFn:e=>Number(e.PC1_Loadings.toFixed(4)),size:120,muiTableBodyCellProps:{align:"center"},Cell:e=>{let{renderedCellValue:t,row:i}=e;return(0,n.jsx)(a.Z,{sx:{backgroundColor:function(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.2,a=.5*(t+i);return e>a?{backgroundColor:"rgba(".concat(255,",").concat(255-255/(i-a)*(e-a),",").concat(255-255/(i-a)*(e-a),", ").concat(n,")")}:e<a?{backgroundColor:"rgba(".concat(255-255/(-t+a)*(-e+a),",").concat(255-255/(-t+a)*(-e+a),",").concat(255,", ").concat(n,")")}:{backgroundColor:"rgba(255,255,255, ".concat(n,")")}}(t,-F,F),py:1.5,width:"100%",height:"100%"},children:t})}}]},[x,F]),D=(0,o.useRef)(null),[N,V]=(0,o.useState)(!0),[R,_]=(0,o.useState)([{id:"PC1_Loadings",desc:!0}]);(0,o.useEffect)(()=>{V(!1)},[]),(0,o.useEffect)(()=>{try{var e,t;null===(t=D.current)||void 0===t||null===(e=t.scrollToIndex)||void 0===e||e.call(t,0)}catch(e){console.error(e)}},[R]);let[H,q]=(0,o.useState)(!1),W=(0,o.useCallback)(()=>q(!0),[q]),U=(0,h.X0)({columns:I,data:k,enableStickyHeader:!0,enablePagination:!1,muiTableContainerProps:{sx:{maxHeight:"400px",minHeight:"400px"}},enableBottomToolbar:!1,enableTopToolbar:!0,enableSorting:!0,initialState:{},state:{sorting:R,isLoading:N},rowVirtualizerInstanceRef:D,rowVirtualizerOptions:{overscan:5},onSortingChange:_,enableRowVirtualization:!0,enableDensityToggle:!1,enableHiding:!1,enableFullScreenToggle:!1,enableFilters:!1,muiTableBodyCellProps:{sx:{px:0,py:0}},enableFilters:!0,enableGlobalFilter:!1,initialState:{showColumnFilters:!0},renderTopToolbarCustomActions:e=>{let{table:i}=e;return(0,n.jsxs)(a.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,n.jsx)(a.Z,{children:(0,n.jsx)(s.Z,{onClick:()=>handleExportData(k,i.getAllColumns().map(e=>({key:e.columnDef.id,displayLabel:e.columnDef.header})),"Biomolecules_".concat(t)),startIcon:(0,n.jsx)(j.Z,{}),children:"Export Table"})}),(0,n.jsx)(a.Z,{children:(0,n.jsx)(d.Z,{variant:"body1",children:A.Name})}),!1,(0,n.jsx)(a.Z,{children:(0,n.jsx)(s.Z,{onClick:W,startIcon:(0,n.jsx)(ei.Z,{}),children:"Plot Heatmap"})})]})}});return(0,n.jsxs)(a.Z,{children:[(0,n.jsx)(h.P2,{table:U}),(0,n.jsx)(HeatMapDialog,{showHeatmap:H,setShowHeatmap:q,featureInfo:k,pathway:t,pathwayInfo:A})]})},HeatMapDialog=e=>{let{setShowHeatmap:t,showHeatmap:i,featureInfo:c,pathway:h,pathwayInfo:u}=e,x=(0,Z.tc)().norm,{mdataType:j}=(0,Z.tc)(),{mdataCategoricalRes:A,workingOmics:k}=(0,en.a0)().PWA,{projections:F}=(0,en.a0)().PWA.jobStatus.pwa_res,[I,D]=(0,o.useState)({min:-2,max:2}),N=(0,o.useMemo)(()=>{j[A.mdataCol].level2id[A.g1.id],j[A.mdataCol].level2id[A.g2.id];let e=F.toSorted((e,t)=>e.proj[0]<t.proj[0]?1:-1).map(e=>e.sample);return{g1:e.filter(e=>j[A.mdataCol].level2id[A.g1.id].includes(e)),g2:e.filter(e=>j[A.mdataCol].level2id[A.g2.id].includes(e))}},[F,j,A]),V=(0,o.useMemo)(()=>{let e={};k.map(t=>{e[t]=(0,ea.$i)(x["x".concat(t)])});let t={};return console.log(c),t.g1=c.map(t=>({id:t.xId,data:N.g1.map(i=>({x:i,y:-e[t.omic][i][t.xId],name:t.Name}))})),t.g2=c.map(t=>({id:t.xId,data:N.g2.map(i=>({x:i,y:-e[t.omic][i][t.xId],name:t.Name}))})),t},[k,N,c,x]);return(0,n.jsxs)(J.Z,{open:i,maxWidth:"xl",onClose:()=>t(!1),className:"printable",children:[(0,n.jsx)(a.Z,{className:"no-printable",sx:{position:"relative",top:40,left:10,width:0},children:(0,n.jsx)(Y.Z2,{name:"Pathway-Analysis"})}),(0,n.jsxs)(a.Z,{sx:{},children:[(0,n.jsxs)(ee.Z,{children:[h," | ",u.Name]}),(0,n.jsx)(et.Z,{sx:{overflowX:"hidden"},children:(0,n.jsxs)(a.Z,{sx:{display:"flex",border:"0px solid red"},children:[(0,n.jsxs)(a.Z,{sx:{border:"0px solid red"},children:[(0,n.jsx)(d.Z,{sx:{fontSize:"1em",textAlign:"right"},children:(0,n.jsx)("span",{children:"​"})}),(0,n.jsx)(er.M2,{width:100,height:30*c.length,data:c.map(e=>({id:e.xId,data:[]})),margin:{top:0,right:0,bottom:0,left:100},axisLeft:{tickSize:5,tickPadding:5,tickRotation:0,legend:"",legendPosition:"middle",legendOffset:40}})]}),(0,n.jsxs)(a.Z,{sx:{border:"0px solid blue"},children:[(0,n.jsx)(d.Z,{sx:{textAlign:"center"},children:A.g1.id}),(0,n.jsx)(er.M2,{height:30*c.length,width:Math.min(550,8*N.g1.length),data:V.g1,margin:{top:0,right:0,bottom:0,left:0},axisLeft:null,axisTop:{tickSize:0,tickPadding:0,tickRotation:0,legend:"",legendOffset:0},colors:{type:"diverging",scheme:"red_blue",minValue:-I.max,maxValue:-I.min},emptyColor:"#555555",animate:!1,enableLabels:!1,tooltip:e=>CustomTooltipComponent(e)})]}),(0,n.jsx)(a.Z,{sx:{mx:.2,width:0,border:"1px solid rgba(0,0,0,1)"}}),(0,n.jsxs)(a.Z,{sx:{},children:[(0,n.jsx)(d.Z,{sx:{textAlign:"center"},children:A.g2.id}),(0,n.jsx)(er.M2,{height:30*c.length,width:Math.min(550,8*N.g2.length),data:V.g2,margin:{top:0,right:0,bottom:0,left:0},axisLeft:null,axisTop:{tickSize:0,tickPadding:0,tickRotation:0,legend:"",legendOffset:0},colors:{type:"diverging",scheme:"red_blue",minValue:-I.max,maxValue:-I.min},emptyColor:"#555555",animate:!1,enableLabels:!1,tooltip:e=>CustomTooltipComponent(e)})]})]})}),(0,n.jsxs)(el.Z,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,n.jsx)(a.Z,{sx:{width:"50%",position:"relative",left:17},children:(0,n.jsx)(PathwayExplorer_Legend,{a:I.min,b:I.max,setZLegend:D})}),(0,n.jsx)(a.Z,{className:"no-printable",children:(0,n.jsx)(s.Z,{onClick:()=>t(!1),children:"Close"})})]})]})]})},PathwayExplorer_Legend=e=>{let{a:t,b:i,setZLegend:a}=e,[s,d]=(0,o.useState)({min:t,max:i}),handleInput=(e,t)=>{let i=Number(t);d(i=>({...i,[e]:t})),"number"!=typeof i||isNaN(i)||a(t=>({...t,[e]:i}))};return(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",padding:"10px",background:"linear-gradient(to right, #053061 0%, #296fad 12%, #7cb6d6 24%, #97c6df 36%, #ffffff 50%, #f7bca1 62%, #f3ab8d 74%, #cf5349 86%, #67001f 100%)",color:"#fff",height:"15px"},children:[(0,n.jsx)("div",{children:(0,n.jsx)("input",{type:"text",style:{width:30,height:20,textAlign:"center"},value:s.min,onChange:e=>handleInput("min",e.target.value)})}),(0,n.jsx)("div",{style:{color:"black"},children:((t+i)/2).toFixed(0)}),(0,n.jsx)("div",{children:(0,n.jsx)("input",{type:"text",style:{width:30,height:20,textAlign:"center"},value:s.max,onChange:e=>handleInput("max",e.target.value)})})]})},CustomTooltipComponent=e=>{let{cell:t}=e;return console.log(t),(0,n.jsxs)(a.Z,{sx:{border:"1px solid rgba(0,0,0,0.5)",borderRadius:3,backgroundColor:"rgba(255,255,255,0.8)",p:2,position:"relative",top:50},children:[(0,n.jsxs)(d.Z,{variant:"body2",children:["Sample: ",(0,n.jsx)("strong",{children:t.data.x})]}),(0,n.jsxs)(d.Z,{variant:"body2",children:["Biomolecule: ",(0,n.jsx)("strong",{children:t.data.name})]}),(0,n.jsxs)(d.Z,{variant:"body2",children:["Value: ",(0,n.jsx)("strong",{children:-t.data.y.toExponential(4)})]})]})};var PWA_PathwayExplorer=function(e){let{view:t,path_info:i,rId2info:o,workingOmics:s}=e,{OMIC2NAME:d}=(0,u.S)();return(0,n.jsxs)(a.Z,{sx:{mt:2},children:["Multi-View"==t&&(0,n.jsx)(ViewComponent,{path_info:i,rId2info:o,view:t}),"Single-View"==t&&(0,n.jsx)(a.Z,{sx:{width:"100%",display:"flex",justifyContent:"space-evenly"},children:s.map(e=>(0,n.jsx)(a.Z,{sx:{px:2,width:"".concat(Math.min(100/s.length,50),"%")},children:(0,n.jsx)(ViewComponent,{path_info:Object.values(i[d[e]]),rId2info:o,view:t,omic:e})},e))})]})},eo=i(35843),es=i(46776),ed=i(33533),ec=i(80565),eh=i(37682),eu=i(666);let ep=(0,eo.ZP)(J.Z)(e=>{let{theme:t}=e;return{"& .MuiDialogContent-root":{padding:t.spacing(2)},"& .MuiDialogActions-root":{padding:t.spacing(1)}}});function HelpSectionTop(){let[e,t]=o.useState(!1),handleClose=()=>{t(!1)};return(0,n.jsxs)(a.Z,{children:[(0,n.jsx)(es.Z,{"aria-label":"question",size:"large",onClick:()=>{t(!0)},children:(0,n.jsx)(eu.Z,{fontSize:"inherit"})}),(0,n.jsxs)(ep,{onClose:handleClose,"aria-labelledby":"customized-dialog-title",open:e,maxWidth:"lg",children:[(0,n.jsx)(ee.Z,{sx:{m:0,p:2},id:"customized-dialog-title",children:"Pathway Analysis - Model Summary"}),(0,n.jsx)(es.Z,{"aria-label":"close",onClick:handleClose,sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]},children:(0,n.jsx)(ed.default,{})}),(0,n.jsxs)(et.Z,{sx:{textAlign:"justify"},dividers:!0,children:[(0,n.jsx)(d.Z,{gutterBottom:!0,children:"The results of your pathway analysis are displayed here, providing a detailed overview of the model’s performance and the most relevant pathways to the condition of interest."}),(0,n.jsx)(d.Z,{gutterBottom:!0,children:"On the upper pane you can find:"}),(0,n.jsx)(a.Z,{sx:{pl:4},children:(0,n.jsxs)(ec.Z,{sx:{listStyleType:"disc",listStyle:"outside"},children:[(0,n.jsxs)(eh.ZP,{sx:{display:"list-item",textAlign:"justify"},children:[(0,n.jsx)("strong",{children:"Statistical Summary Table"})," (Left-Side):",(0,n.jsxs)(ec.Z,{sx:{listStyleType:"disc",listStyle:"outside"},children:[(0,n.jsx)(eh.ZP,{sx:{display:"list-item",textAlign:"justify"},children:"At the top of the table, the R-squared (R\xb2) value is displayed, representing the proportion of variance in the response variable explained by the model. An empirical p-value is also shown, calculated by performing ten permutations on the response vector (y) and comparing the simulated R\xb2 values with the actual one. The minimum p-value that can be obtained is 0.1, reflecting the reliability of the model."}),(0,n.jsxs)(eh.ZP,{sx:{display:"list-item",textAlign:"justify"},children:[(0,n.jsx)("strong",{children:"Latent Variables"}),": The table lists each latent variable calculated by the model, with the following columns:",(0,n.jsxs)(ec.Z,{sx:{listStyleType:"disc",listStyle:"outside"},children:[(0,n.jsxs)(eh.ZP,{sx:{display:"list-item",textAlign:"justify"},children:[(0,n.jsx)("strong",{children:"R\xb2 Value"}),": Indicates how much of the variability is explained by each latent variable."]}),(0,n.jsxs)(eh.ZP,{sx:{display:"list-item",textAlign:"justify"},children:[(0,n.jsx)("strong",{children:"P-Value"}),": Shows the R\xb2 statistical significance of the each latent variable."]}),(0,n.jsxs)(eh.ZP,{sx:{display:"list-item",textAlign:"justify"},children:[(0,n.jsx)("strong",{children:"Omic Contribution"})," (Multi-View Only): An additional column shows the percentage contribution of each omic dataset to the corresponding latent variable, offering insight into how different omics contribute to the model."]})]})]})]})]}),(0,n.jsxs)(eh.ZP,{sx:{display:"list-item",textAlign:"justify"},children:[(0,n.jsx)("strong",{children:"Sample Projection Scatter Plot"})," (Right Side): This scatter plot displays the projection of samples onto each latent variable, with points color-coded according to their group in the analyzed condition. This visualization helps in assessing how well the model separates the different groups based on the latent variables."]})]})})]}),(0,n.jsx)(el.Z,{})]})]})}let ex=(0,eo.ZP)(J.Z)(e=>{let{theme:t}=e;return{"& .MuiDialogContent-root":{padding:t.spacing(2)},"& .MuiDialogActions-root":{padding:t.spacing(1)}}});function HelpSectionBottom(){let[e,t]=o.useState(!1),handleClose=()=>{t(!1)};return(0,n.jsxs)(a.Z,{children:[(0,n.jsx)(es.Z,{"aria-label":"question",size:"large",onClick:()=>{t(!0)},children:(0,n.jsx)(eu.Z,{fontSize:"inherit"})}),(0,n.jsxs)(ex,{onClose:handleClose,"aria-labelledby":"customized-dialog-title",open:e,maxWidth:"lg",children:[(0,n.jsx)(ee.Z,{sx:{m:0,p:2},id:"customized-dialog-title",children:"Pathway Analysis - Pathway Exploration"}),(0,n.jsx)(es.Z,{"aria-label":"close",onClick:handleClose,sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]},children:(0,n.jsx)(ed.default,{})}),(0,n.jsxs)(et.Z,{sx:{textAlign:"justify"},dividers:!0,children:[(0,n.jsx)(d.Z,{gutterBottom:!0,children:"The structure of the lower pane varies based on whether you are using Multi-View or Single-View analysis:"}),(0,n.jsx)(a.Z,{sx:{pl:4},children:(0,n.jsxs)(ec.Z,{sx:{listStyleType:"disc",listStyle:"outside"},children:[(0,n.jsxs)(eh.ZP,{sx:{display:"list-item",textAlign:"justify"},children:[(0,n.jsx)("strong",{children:"Multi-View"}),":",(0,n.jsxs)(ec.Z,{sx:{listStyleType:"disc",listStyle:"outside"},children:[(0,n.jsxs)(eh.ZP,{sx:{display:"list-item",textAlign:"justify"},children:[(0,n.jsx)("strong",{children:"Omic-Specific Pathway Tables"}),": Separate tables are provided for each analyzed omic, listing the most relevant pathways for each (VIP ",">"," 1). This allows you to see how pathways across different omics contribute to the overall model."]}),(0,n.jsxs)(eh.ZP,{sx:{display:"list-item",textAlign:"justify"},children:[(0,n.jsx)("strong",{children:"Pathway Exploration"}),": Similar to Single-View, you can click on pathways to explore the associated biomolecules, with their degree of association indicated by their loadings."]})]})]}),(0,n.jsxs)(eh.ZP,{sx:{display:"list-item",textAlign:"justify"},children:[(0,n.jsx)("strong",{children:"Single-View"}),":",(0,n.jsxs)(ec.Z,{sx:{listStyleType:"disc",listStyle:"outside"},children:[(0,n.jsxs)(eh.ZP,{sx:{display:"list-item",textAlign:"justify"},children:[(0,n.jsx)("strong",{children:"Relevant Pathways Table"}),": Displays the pathways most strongly associated with the outcome (only pathways with a VIP ",">"," 1 are shown). The VIP (Variable Importance in Projection) score highlights the importance of each pathway in the model."]}),(0,n.jsxs)(eh.ZP,{sx:{display:"list-item",textAlign:"justify"},children:[(0,n.jsx)("strong",{children:"Pathway Exploration"}),": Clicking on a pathway allows you to explore the biomolecules associated with it. The association is indicated by the loading on the first principal component, which provides insight into the contribution of each biomolecule (the loading sign should not be interpreted as a biological increase or decrease)."]})]})]})]})})]}),(0,n.jsx)(el.Z,{})]})]})}var PWA_Results=function(e){let{pwa_res:t,runId:i,rId2info:o,view:s,workingOmics:d,mdataCategorical:c}=e;return(0,n.jsxs)(a.Z,{children:[(0,n.jsxs)(a.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,n.jsx)(a.Z,{sx:{height:0,width:0,alignSelf:"start"},children:(0,n.jsx)(HelpSectionTop,{})}),(0,n.jsx)(a.Z,{sx:{width:"50%",px:3},children:(0,n.jsx)(PWA_ModelInfo,{runId:i,model_info:t.model_info,view:s,workingOmics:d})}),(0,n.jsx)(a.Z,{sx:{width:"50%",px:3},children:(0,n.jsx)(PWA_ScatterPlot,{projections:t.projections,nLV:t.model_info.LV.length,mdataCategorical:c})})]}),(0,n.jsxs)(a.Z,{sx:{mt:4},children:[(0,n.jsx)(a.Z,{sx:{width:0,height:0,position:"relative",top:-35},children:(0,n.jsx)(HelpSectionBottom,{})}),(0,n.jsx)(PWA_PathwayExplorer,{view:s,path_info:t.path_info,rId2info:o,workingOmics:d})]})]})}},53146:function(e,t,i){i.d(t,{LA:function(){return DownloadComponent},Wd:function(){return DownloadComponentBarChart},OT:function(){return DownloadComponentGSEA},Z2:function(){return DownloadHeatmap},kr:function(){return downloadImageDensityPlot}});var n=i(57437),a=i(39227),o=i(46776),s=i(52481);function downloadSVG(e,t){let i;i="svg"==e.tagName.toLowerCase()?new XMLSerializer().serializeToString(e):new XMLSerializer().serializeToString(e.childNodes[0].childNodes[0]);let n=new Blob([i],{type:"image/svg+xml;charset=utf-8"});var a=URL.createObjectURL(n);let o=window.document.createElement("a");o.style="display:none",o.download="".concat(t),o.href=a,document.body.appendChild(o),o.click(),document.body.removeChild(o),o.remove()}let downloadImageDensityPlot=async(e,t,i)=>{let n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.appendChild(document.createElementNS("http://www.w3.org/2000/svg","g")),n.appendChild(document.createElementNS("http://www.w3.org/2000/svg","g")),n.appendChild(document.createElementNS("http://www.w3.org/2000/svg","g"));let a=e.container.firstChild.cloneNode(!0);Array.from(a.children).map(e=>n.children[0].appendChild(e));let o=t.firstChild.firstChild.firstChild.cloneNode(!0);Array.from(o.children[0].children).map(e=>n.children[1].appendChild(e)),n.children[1].setAttribute("transform","translate(-20, 200)"),Array.from(o.children[2].children).map(e=>n.children[2].appendChild(e)),n.children[2].setAttribute("transform","translate(-20, 230)"),downloadSVG(n,"DensityPlot_".concat(i,".svg"))},DownloadComponent=e=>{let{scatterRef:t,name:i}=e;return(0,n.jsx)(a.Z,{sx:{height:0},children:(0,n.jsx)(a.Z,{sx:{width:50,position:"relative",top:5,zIndex:10},children:(0,n.jsx)(o.Z,{"aria-label":"download",size:"small",onClick:()=>{let e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.appendChild(document.createElementNS("http://www.w3.org/2000/svg","g"));let n=t.current.container.cloneNode(!0);if(Array.from(n.children[0].children).map(t=>e.children[0].appendChild(t)),3==n.children.length){e.appendChild(document.createElementNS("http://www.w3.org/2000/svg","g")),e.children[1].setAttribute("transform","translate(600, 20)");let t=function(e){let t=document.createElement("div");t.appendChild(e);let i=t.querySelector(".recharts-legend-wrapper"),n=i.querySelectorAll(".recharts-legend-item"),a="http://www.w3.org/2000/svg",o=document.createElementNS(a,"svg");o.setAttribute("xmlns",a),o.setAttribute("width",i.style.width.replace("px","")),o.setAttribute("viewBox","0 0 ".concat(parseInt(i.style.width,10)," ").concat(20*n.length));let s=20;return n.forEach(e=>{let t=e.querySelector("svg path"),i=e.querySelector(".recharts-legend-item-text"),n=document.createElementNS(a,"g");n.setAttribute("transform","translate(0, ".concat(s,")"));let d=document.createElementNS(a,"path");d.setAttribute("d",t.getAttribute("d")),d.setAttribute("fill",t.getAttribute("fill")),d.setAttribute("transform","".concat(t.getAttribute("transform")," scale(0.5)"));let c=document.createElementNS(a,"text");c.textContent=i.textContent,c.setAttribute("x",26),c.setAttribute("y",21),c.setAttribute("fill",i.style.color),c.setAttribute("font-family","Calibri"),c.setAttribute("font-size","16"),n.appendChild(d),n.appendChild(c),o.appendChild(n),s+=20}),o}(n.children[1]);Array.from(t.children).map(t=>e.children[1].appendChild(t))}downloadSVG(e,"".concat(i,"-Scatter"))},sx:{opacity:.5},children:(0,n.jsx)(s.Z,{})})})})},DownloadComponentBarChart=e=>{let{scatterRef:t,name:i}=e;return(0,n.jsx)(a.Z,{sx:{height:0},children:(0,n.jsx)(a.Z,{sx:{width:50,position:"relative",top:5,zIndex:5e3},children:(0,n.jsx)(o.Z,{"aria-label":"download",size:"small",onClick:()=>{let e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.appendChild(document.createElementNS("http://www.w3.org/2000/svg","g"));let n=t.current.container.cloneNode(!0);if(Array.from(n.children[0].children).map(t=>e.children[0].appendChild(t)),3==n.children.length){e.appendChild(document.createElementNS("http://www.w3.org/2000/svg","g")),e.children[1].setAttribute("transform","translate(600, 20)");let t=function(e){let t=document.createElement("div");t.appendChild(e);let i=t.querySelector(".recharts-legend-wrapper"),n=Array.from(i.children[0].children),a="http://www.w3.org/2000/svg",o=document.createElementNS(a,"svg");o.setAttribute("xmlns",a),o.setAttribute("width",i.style.width.replace("px","")),o.setAttribute("viewBox","0 0 ".concat(parseInt(i.style.width,10)," ").concat(30*n.length));let s=25;return n.forEach(e=>{let t=e.querySelector("div"),i=e.querySelector("span"),n=document.createElementNS(a,"g");n.setAttribute("transform","translate(-30, ".concat(s,")"));let d=document.createElementNS(a,"rect");d.setAttribute("x",0),d.setAttribute("y",0),d.setAttribute("width",15),d.setAttribute("height",15),d.setAttribute("fill",t.style.backgroundColor);let c=document.createElementNS(a,"text");c.textContent=i.textContent,c.setAttribute("x",20),c.setAttribute("y",12),c.setAttribute("font-family","Calibri"),c.setAttribute("font-size","12"),c.setAttribute("fill","#000"),n.appendChild(d),n.appendChild(c),o.appendChild(n),s+=30}),o}(n.children[1]);Array.from(t.children).map(t=>e.children[1].appendChild(t))}downloadSVG(e,"".concat(i,"-BarPlot"))},sx:{opacity:.5},children:(0,n.jsx)(s.Z,{})})})})},DownloadHeatmap=e=>{let{scatterRef:t,name:i}=e;return(0,n.jsx)(a.Z,{sx:{height:0},children:(0,n.jsx)(a.Z,{sx:{width:50,position:"relative",top:5,zIndex:5e3},children:(0,n.jsx)(o.Z,{"aria-label":"download",size:"small",onClick:()=>window.print(),sx:{opacity:.5},children:(0,n.jsx)(s.Z,{})})})})},DownloadComponentGSEA=e=>{let{scatterRef:t,name:i}=e;return(0,n.jsx)(a.Z,{sx:{height:0},children:(0,n.jsx)(a.Z,{sx:{width:50,position:"relative",top:5,zIndex:5e3},children:(0,n.jsx)(o.Z,{"aria-label":"download",size:"small",onClick:()=>{let e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.appendChild(document.createElementNS("http://www.w3.org/2000/svg","g")),e.children[0].setAttribute("transform","translate(0,70)");let n=t.current.p1.current.cloneNode(!0);Array.from(n.children[0].children[0].children).map(t=>e.children[0].appendChild(t)),e.appendChild(document.createElementNS("http://www.w3.org/2000/svg","g")),e.children[1].setAttribute("transform","translate(0,291)");let a=t.current.p2.current.cloneNode(!0);Array.from(a.children[0].children[0].children).map(t=>e.children[1].appendChild(t)),e.appendChild(document.createElementNS("http://www.w3.org/2000/svg","g")),e.children[2].setAttribute("transform","translate(0,342)");let o=t.current.p3.current.cloneNode(!0);Array.from(o.children[0].children[0].children).map(t=>e.children[2].appendChild(t)),e.appendChild(document.createElementNS("http://www.w3.org/2000/svg","g")),e.children[3].setAttribute("transform","translate(60,0)");let s=function(e){let t=document.createElement("div");t.appendChild(e);let i=t.querySelector(".MuiBox-root.css-0"),n=i.querySelector(".MuiBox-root.css-3cj8ml p"),a=i.querySelector(".MuiBox-root.css-85t6ji p"),o="http://www.w3.org/2000/svg",s=document.createElementNS(o,"svg");s.setAttribute("xmlns",o),s.setAttribute("width","300"),s.setAttribute("height","100"),s.setAttribute("viewBox","0 0 300 100");let d=document.createElementNS(o,"text");d.textContent=n.textContent,d.setAttribute("x","10"),d.setAttribute("y","30"),d.setAttribute("font-family","Calibri"),d.setAttribute("font-size","20"),d.setAttribute("fill","#787878");let c=document.createElementNS(o,"text");return c.textContent=a.textContent,c.setAttribute("x","10"),c.setAttribute("y","52"),c.setAttribute("font-family","Calibri"),c.setAttribute("font-size","20"),c.setAttribute("fill","#787878"),s.appendChild(d),s.appendChild(c),s}(t.current.values.cloneNode(!0));Array.from(s.children).map(t=>e.children[3].appendChild(t)),downloadSVG(e,"".concat(i))},sx:{opacity:.5},children:(0,n.jsx)(s.Z,{})})})})}},68448:function(e,t,i){i.d(t,{s:function(){return n}});let n=["#636EFA","#EF553B","#00CC96","#AB63FA","#FFA15A","#19D3F3","#FF6692","#B6E880","#FF97FF","#FECB52","#2E91E5","#E15F99","#1CA71C","#FB0D0D","#DA16FF","#222A2A","#B68100","#750D86","#EB663B","#511CFB","#00A08B","#FB00D1","#FC0080","#B2828D","#6C7C32","#778AAE","#862A16","#A777F1","#620042","#1616A7","#DA60CA","#6C4516","#0D2A63","#AF0038"]},92069:function(e,t,i){i.d(t,{LR:function(){return LW},gB:function(){return BW},iL:function(){return G}}),(n=a||(a={})).csv="text/csv",n.tsv="text/tab-separated-values",n.plain="text/plain";var n,a,X=e=>e,z=e=>e,o={fieldSeparator:",",decimalSeparator:".",quoteStrings:!0,quoteCharacter:'"',showTitle:!1,title:"My Generated Report",filename:"generated",showColumnHeaders:!0,useTextFile:!1,fileExtension:"csv",mediaType:a.csv,useBom:!0,columnHeaders:[],useKeysAsHeaders:!1,boolDisplay:{true:"TRUE",false:"FALSE"},replaceUndefinedWith:""},G=e=>Object.assign({},o,e);let K=class K extends Error{constructor(e){super(e),this.name="CsvGenerationError"}};let B=class B extends Error{constructor(e){super(e),this.name="EmptyHeadersError"}};let L=class L extends Error{constructor(e){super(e),this.name="CsvDownloadEnvironmentError"}};let P=class P extends Error{constructor(e){super(e),this.name="UnsupportedDataFormatError"}};var w=e=>"object"==typeof e?X(e.key):X(e),y=e=>"object"==typeof e?X(e.displayLabel):X(e),T=(e,...t)=>t.reduce((e,t)=>t(e),e),E=e=>t=>e.useBom?X(z(t)+"\uFEFF"):t,M=e=>t=>e.showTitle?S(X(z(t)+e.title))(X("")):t,S=e=>t=>X(z(e)+z(t)+"\r\n"),O=e=>(t,i)=>l(e)(X(z(t)+z(i))),l=e=>t=>X(z(t)+e.fieldSeparator),b=(e,t)=>i=>{if(!e.showColumnHeaders)return i;if(t.length<1)throw new B("Option to show headers but none supplied. Make sure there are keys in your collection or that you've supplied headers through the config options.");let n=X("");for(let i=0;i<t.length;i++){let a=y(t[i]);n=O(e)(n,v(e,z(a)))}return n=X(z(n).slice(0,-1)),S(i)(n)},C=(e,t,i)=>n=>{let a=n;for(var o=0;o<i.length;o++){let n=X("");for(let a=0;a<t.length;a++){let s=w(t[a]),d=i[o][z(s)];n=O(e)(n,v(e,d))}n=X(z(n).slice(0,-1)),a=S(a)(n)}return a},m=e=>+e===e&&(!isFinite(e)||!!(e%1)),p=(e,t)=>{if(m(t)){if("locale"===e.decimalSeparator)return X(t.toLocaleString());if(e.decimalSeparator)return X(t.toString().replace(".",e.decimalSeparator))}return X(t.toString())},Q=(e,t)=>{let i=t;return(e.quoteStrings||e.fieldSeparator&&t.indexOf(e.fieldSeparator)>-1||e.quoteCharacter&&t.indexOf(e.quoteCharacter)>-1||t.indexOf("\n")>-1||t.indexOf("\r")>-1)&&(i=e.quoteCharacter+('"'==e.quoteCharacter&&t.indexOf('"')>-1?t.replace(/"/g,'""'):t)+e.quoteCharacter),X(i)},g=(e,t)=>X(e.boolDisplay[t?"true":"false"]),r=(e,t)=>void 0===t&&void 0!==e.replaceUndefinedWith?Q(e,e.replaceUndefinedWith+""):null===t?Q(e,"null"):Q(e,""),v=(e,t)=>{if("number"==typeof t)return p(e,t);if("string"==typeof t)return Q(e,t);if("boolean"==typeof t&&e.boolDisplay)return g(e,t);if(null==t)return r(e,t);throw new P(`
    typeof ${typeof t} isn't supported. Only number, string, boolean, null and undefined are supported.
    Please convert the data in your object to one of those before generating the CSV.
    `)},BW=e=>t=>{let i=G(e),n=i.useKeysAsHeaders?Object.keys(t[0]):i.columnHeaders,a=T(X(""),E(i),M(i),b(i,n),C(i,n,t));if(z(a).length<1)throw new K("Output is empty. Is your data formatted correctly?");return a},f=e=>t=>{let i=G(e),n=z(t),a=i.useTextFile?"text/plain":i.mediaType;return new Blob([n],{type:`${a};charset=utf8;`})},LW=e=>t=>{if(!window)throw new L("Downloading only supported in a browser environment.");let i=f(e)(t),n=G(e),a=n.useTextFile?"txt":n.fileExtension,o=`${n.filename}.${a}`,s=document.createElement("a");s.download=o,s.href=URL.createObjectURL(i),s.setAttribute("visibility","hidden"),document.body.appendChild(s),s.click(),document.body.removeChild(s)}}}]);